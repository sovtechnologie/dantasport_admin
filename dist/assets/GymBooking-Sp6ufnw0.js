import{b as D,r as o,j as a,a0 as j}from"./index-XzM8Cj3c.js";import{u as v}from"./useQuery-Beh9q-Hu.js";import{f as _}from"./endpointApi-DBrVeqMh.js";import{C}from"./index-C1XA4k9t.js";import{I as B}from"./index-Vt2X7eqz.js";import{a as R}from"./SearchOutlined-B0571LVy.js";import{S as F}from"./index-Ci-vNBFy.js";import{D as L}from"./index-B_VpdSuJ.js";import{F as P}from"./Table-Dv9gfO7j.js";import"./Skeleton-BxJpOdZN.js";import"./PlusOutlined-Dj0tFLrA.js";import"./Input-BUj1c9yh.js";import"./EyeOutlined-BVmecd_y.js";import"./addEventListener-kraIZfrw.js";import"./index-V8rTfzId.js";import"./useBubbleLock-B-1WFybW.js";import"./index-BZS9dDwd.js";import"./useForm-EwlPOCpB.js";import"./extendsObject-78o_rR5W.js";const $=c=>{const{vendorId:s,search:i="",venueId:m=null,startDate:l=null,endDate:n=null,page:d=1,limit:r=10}=c||{};return v({queryKey:["gymBookingList",s,i,m,l,n,d,r],queryFn:()=>_({vendorId:s,search:i,venueId:m,startDate:l,endDate:n,page:d,limit:r}),enabled:!!s,staleTime:2*60*1e3,cacheTime:10*60*1e3,keepPreviousData:!0})},{RangePicker:G}=L,ee=()=>{const c=D(t=>t.auth.user?.id),[s,i]=o.useState(""),[m,l]=o.useState(null),[n,d]=o.useState([]),[r,u]=o.useState(1),[p,h]=o.useState(10),x=n?.[0]?.startOf("day").toISOString(),y=n?.[1]?.endOf("day").toISOString(),{data:g,isLoading:I,isFetching:S}=$({vendorId:c,search:s,venueId:m,startDate:x,endDate:y,page:r,limit:p}),f=o.useMemo(()=>(g?.result??[]).map((e,b)=>({key:e.booking_id??b,bookingId:`#${e.booking_id}`,redeem:`${e.total_check_in}/${e.total_passes}`,gym:e.gym_name,user:`${e.full_name}
${e.mobile_number}`,date:e.booking_date?new Date(e.booking_date).toLocaleString("en-GB"):"",amount:`â‚¹${Number(e.amount).toFixed(0)}`})),[g?.result]),k=[{title:"Booking ID",dataIndex:"bookingId"},{title:"Redeem Passes",dataIndex:"redeem"},{title:"Gym Name",dataIndex:"gym"},{title:"User Details",dataIndex:"user"},{title:"Date of Purchase",dataIndex:"date"},{title:"Amount",dataIndex:"amount"}];return a.jsxs("div",{className:"venue-card",children:[a.jsx("h3",{className:"venue-title",children:"Reports"}),a.jsx(C,{style:{marginBottom:16},children:a.jsxs("div",{style:{display:"flex",gap:12,flexWrap:"wrap"},children:[a.jsx(B,{allowClear:!0,prefix:a.jsx(R,{}),placeholder:"Search by Booking ID or customer name",style:{width:320},onChange:t=>{u(1),i(t.target.value)}}),a.jsx(F,{allowClear:!0,placeholder:"Select Venue",style:{width:200},onChange:t=>{u(1),l(t??null)},options:[]}),a.jsx(G,{onChange:t=>{u(1),d(t||[])}}),S&&a.jsx(j,{size:"small"})]})}),a.jsx(P,{columns:k,dataSource:f,loading:I,pagination:{current:r,pageSize:p,onChange:(t,e)=>{u(t),h(e)},showSizeChanger:!0}})]})};export{ee as default};
