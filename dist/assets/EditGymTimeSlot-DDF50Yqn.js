import{a as _,d as C,r as i,j as e,B as x,S as E}from"./index-XzM8Cj3c.js";/* empty css                  */import{n as N}from"./endpointApi-DBrVeqMh.js";import{h as u}from"./moment-C5S46NFB.js";import{F as r}from"./index-BLf5ALDk.js";import{s as h}from"./index-Yvuj0Esb.js";import{R as P}from"./ArrowLeftOutlined-DMqiT_4K.js";import{S as j}from"./index-Ci-vNBFy.js";import{T as g}from"./index-DdiLVOL9.js";import{C as F}from"./index-V8rTfzId.js";import"./useForm-EwlPOCpB.js";import"./row-CTTWbxgc.js";import"./index-BfZvbS5e.js";import"./ExclamationCircleFilled-D7dRXMD9.js";import"./InfoCircleFilled-Ce5_6Fhy.js";import"./SearchOutlined-B0571LVy.js";import"./index-B_VpdSuJ.js";import"./useBubbleLock-B-1WFybW.js";const{Option:b}=j;function $(){const[m]=r.useForm(),n=_(),o=C(),[p,T]=i.useState(!1),[t,S]=i.useState(null),[s,f]=i.useState({monday:!1,tuesday:!1,wednesday:!1,thursday:!1,friday:!1,saturday:!1,sunday:!1}),d=o.state?.timeSlotId||new URLSearchParams(o.search).get("id");i.useEffect(()=>{t&&(m.setFieldsValue({startTime:u(t.start_time,"HH:mm:ss"),endTime:u(t.end_time,"HH:mm:ss"),scheduleType:t.days_schedule===1?"daily":"custom"}),f({monday:t.monday===1,tuesday:t.tuesday===1,wednesday:t.wednesday===1,thursday:t.thursday===1,friday:t.friday===1,saturday:t.saturday===1,sunday:t.sunday===1}))},[t,m]),i.useEffect(()=>{o.state?.timeSlotData?S(o.state.timeSlotData):d&&S({id:d,gym_id:35,start_time:"06:00:00",end_time:"17:00:00",days_schedule:1,monday:1,tuesday:1,wednesday:1,thursday:1,friday:1,saturday:1,sunday:0,created_at:"2025-09-10T11:24:31.000Z",updated_at:"2025-09-10T12:01:19.000Z"})},[o.state,d]);const k=i.useCallback(async a=>{try{if(T(!0),console.log("Form Values:",a),!Object.values(s).some(I=>I)){h.error("Please select at least one day");return}const y={gymTimeSlotId:d,startTime:a.startTime.format("HH:mm"),endTime:a.endTime.format("HH:mm"),days_schedule:a.scheduleType==="daily"?1:0,monday:s.monday,tuesday:s.tuesday,wednesday:s.wednesday,thursday:s.thursday,friday:s.friday,saturday:s.saturday,sunday:s.sunday};console.log("API payload:",y);const c=await N(y);console.log("API Response:",c),c.status===200||c.status===201?(h.success("Gym time slot updated successfully!"),m.resetFields(),n("/vendor/gym/timeslots")):h.error(c.message||"Failed to update gym time slot")}catch(l){console.error("Error updating gym time slot:",l),h.error(l.response?.data?.message||"Failed to update gym time slot. Please try again.")}finally{T(!1)}},[d,s,n]),v=(a,l)=>{f(y=>({...y,[a]:l}))},w=a=>{a==="daily"&&f({monday:!0,tuesday:!0,wednesday:!0,thursday:!0,friday:!0,saturday:!0,sunday:!0})},D=()=>{n("/vendor/gym/timeslots")},H=[{key:"monday",label:"Monday"},{key:"tuesday",label:"Tuesday"},{key:"wednesday",label:"Wednesday"},{key:"thursday",label:"Thursday"},{key:"friday",label:"Friday"},{key:"saturday",label:"Saturday"},{key:"sunday",label:"Sunday"}];return t?e.jsxs("div",{className:"add-member-container",children:[e.jsx("div",{style:{marginBottom:"20px"},children:e.jsx(x,{type:"text",icon:e.jsx(P,{}),onClick:D,style:{color:"#1163C7",fontSize:"16px",padding:"4px 8px",height:"auto"},children:"Back to Time Slots"})}),e.jsxs(r,{layout:"vertical",onFinish:k,form:m,initialValues:{startTime:u(t.start_time,"HH:mm:ss"),endTime:u(t.end_time,"HH:mm:ss"),scheduleType:t.days_schedule===1?"daily":"custom"},children:[e.jsxs("h2",{className:"member-title",children:["EDIT GYM TIME SLOT #",t?.id]}),e.jsx("div",{className:"member-form-row",children:e.jsx(r.Item,{name:"scheduleType",label:"Schedule Type",rules:[{required:!0,message:"Please select schedule type"}],children:e.jsxs(j,{placeholder:"Select Schedule Type",className:"member-Select",onChange:w,children:[e.jsx(b,{value:"custom",children:"Custom Days"}),e.jsx(b,{value:"daily",children:"Daily (All Days)"})]})})}),e.jsxs("div",{className:"member-form-row",children:[e.jsx(r.Item,{name:"startTime",label:"Start Time",rules:[{required:!0,message:"Please select start time"}],children:e.jsx(g,{format:"HH:mm",style:{width:"100%"},placeholder:"Select start time"})}),e.jsx(r.Item,{name:"endTime",label:"End Time",rules:[{required:!0,message:"Please select end time"}],children:e.jsx(g,{format:"HH:mm",style:{width:"100%"},placeholder:"Select end time"})})]}),e.jsx("div",{className:"member-form-row",children:e.jsx(r.Item,{label:"Select Days",required:!0,help:"Select the days when this time slot will be active",children:e.jsx("div",{style:{padding:"16px",border:"1px solid #d9d9d9",borderRadius:"6px",backgroundColor:"#fafafa"},children:e.jsx(E,{direction:"vertical",size:"small",style:{width:"100%"},children:H.map(a=>e.jsx(F,{checked:s[a.key],onChange:l=>v(a.key,l.target.checked),style:{display:"block",marginBottom:"8px",fontSize:"14px"},children:a.label},a.key))})})})}),e.jsx(r.Item,{className:"centered-submit",children:e.jsx(x,{type:"primary",htmlType:"submit",loading:p,disabled:p,children:p?"UPDATING TIME SLOT...":"UPDATE GYM TIME SLOT"})})]})]}):e.jsx("div",{className:"add-member-container",children:e.jsxs("div",{style:{textAlign:"center",padding:"50px"},children:[e.jsx("div",{style:{marginBottom:"20px"},children:d?"Loading time slot data...":"No time slot data available"}),!d&&e.jsx(x,{type:"primary",onClick:()=>n("/vendor/gym/timeslots"),children:"Back to Time Slots List"})]})})}export{$ as default};
