import{r as m,j as e,B as L}from"./index-XzM8Cj3c.js";import{u as x}from"./UploadIcon-DVASWBXr.js";import{b as F,u as V,a as B}from"./useUpdateBanner-hbteqcYd.js";import{u as S}from"./useQuery-Beh9q-Hu.js";import{u as w}from"./useGetAllVendor-Dv7Di3PL.js";import{F as n}from"./index-BLf5ALDk.js";import{S as d}from"./index-Ci-vNBFy.js";import{I as u}from"./index-Vt2X7eqz.js";import{D as j}from"./index-B_VpdSuJ.js";import{U as f}from"./index-DpVHb5nB.js";import"./useMutation-CNNl5TnA.js";import"./endpointApi-CRaEXM59.js";import"./useForm-EwlPOCpB.js";import"./row-CTTWbxgc.js";import"./index-BfZvbS5e.js";import"./ExclamationCircleFilled-D7dRXMD9.js";import"./SearchOutlined-B0571LVy.js";import"./Input-BUj1c9yh.js";import"./EyeOutlined-BVmecd_y.js";import"./fade-_qbex92f.js";import"./DeleteOutlined-Ke0rSpX_.js";import"./DownloadOutlined-D_mskBw8.js";import"./progress-DW_vC4dS.js";const E=l=>S({queryKey:["vendorVenueList",l],queryFn:()=>F({vendorId:l}),enabled:!!l,staleTime:5*60*1e3}),{Option:s}=d;function re(){const[l,g]=m.useState(null),[b,o]=m.useState(!1),[t]=n.useForm(),p=V(),I=B();console.log(p.isLoading);const{data:c,isLoading:v}=w(),{data:h,isLoading:y}=E(l);m.useEffect(()=>{t.setFieldsValue({venueId:void 0,venueType:void 0})},[l,t]);const D=r=>{o(!0);const a=new FormData;a.append("vendorId",r.vendorId),a.append("venueId",r.venueId),a.append("startDate",r.startDate?.format("YYYY-MM-DD")),a.append("endDate",r.endDate?.format("YYYY-MM-DD")),a.append("url",r.pageLink),a.append("radius",r.radius),a.append("bannerType","2"),a.append("venueType",r.venueType||""),r.desktopBanner?.length>0&&a.append("desktopImage",r.desktopBanner[0].originFileObj),r.mobileBanner?.length>0&&a.append("mobileImage",r.mobileBanner[0].originFileObj),console.log("Submitted values:",a),p.mutate(a,{onSuccess:i=>{o(!1);const N={bannerId:i?.result,page:r.page.map(Number),position:Number(r.position)};I.mutate(N,{onSettled:()=>{setUpdateLoading(!1)}}),t.resetFields()},onError:()=>{o(!1)}})};return e.jsxs("div",{className:"banner-form-container",children:[e.jsx("h3",{className:"form-title",children:"Add Banners"}),e.jsxs(n,{form:t,layout:"vertical",onFinish:D,className:"banner-form",children:[e.jsxs("div",{className:"form-row",children:[e.jsx(n.Item,{label:"Vendor ID",name:"vendorId",rules:[{required:!0}],children:e.jsx(d,{showSearch:!0,placeholder:"Select a vendorId",optionFilterProp:"children",filterOption:(r,a)=>a.children.toLowerCase().includes(r.toLowerCase()),loading:v,allowClear:!0,onChange:r=>{const a=c?.result?.find(i=>i.id===r);g(r),t.setFieldsValue({vendorId:a?.id||""})},children:c?.result?.map(r=>e.jsx(s,{value:r.id,children:`${r.full_name} (${r.id})`},r.id))})}),e.jsx(n.Item,{label:"Venue ID",name:"venueId",rules:[{required:!0}],children:e.jsx(d,{showSearch:!0,placeholder:"Select a venueId",optionFilterProp:"children",filterOption:(r,a)=>a.children.toLowerCase().includes(r.toLowerCase()),loading:y,allowClear:!0,onChange:r=>{const a=h?.result?.find(i=>i.id===r);t.setFieldsValue({venueId:a?.id||"",venueType:a?.venue_type||""})},children:h?.result?.map(r=>e.jsx(s,{value:r.id,children:`${r.name} (${r.id})`},`${r.type}-${r.id}`))})}),e.jsx(n.Item,{label:"Venue Type",name:"venueType",hidden:!0,children:e.jsx(u,{disabled:!0})})]}),e.jsxs("div",{className:"form-row",children:[e.jsx(n.Item,{label:"Start Date",name:"startDate",rules:[{required:!0}],children:e.jsx(j,{style:{width:"100%"}})}),e.jsx(n.Item,{label:"End Date",name:"endDate",rules:[{required:!0}],children:e.jsx(j,{style:{width:"100%"}})})]}),e.jsxs("div",{className:"form-row",children:[e.jsx(n.Item,{label:"Radius in KM",name:"radius",rules:[{required:!0}],children:e.jsx(u,{type:"number",placeholder:"Enter Radius in KM"})}),e.jsx(n.Item,{label:"Enter Page Link To Redirect",name:"pageLink",rules:[{required:!0}],children:e.jsx(u,{placeholder:"Enter URL"})})]}),e.jsxs("div",{className:"form-row",children:[e.jsx(n.Item,{label:"Pages",name:"page",rules:[{required:!0}],children:e.jsxs(d,{placeholder:"Select Pages",mode:"multiple",allowClear:!0,children:[e.jsx(s,{value:1,children:"Home"}),e.jsx(s,{value:2,children:"List Page"}),e.jsx(s,{value:3,children:"VenueDetails"}),e.jsx(s,{value:4,children:"SuccessfulPage"}),e.jsx(s,{value:5,children:"EventDetails"}),e.jsx(s,{value:6,children:"GymDetails"})]})}),e.jsx(n.Item,{label:"BannerPosition",name:"position",rules:[{required:!0}],children:e.jsxs(d,{placeholder:"Select Banner Position",children:[e.jsx(s,{value:"1",children:"1"}),e.jsx(s,{value:"2",children:"2"}),e.jsx(s,{value:"3",children:"3"}),e.jsx(s,{value:"4",children:"4"}),e.jsx(s,{value:"5",children:"5"}),e.jsx(s,{value:"6",children:"6"})]})})]}),e.jsxs("div",{className:"form-row",children:[e.jsx(n.Item,{label:"Upload Banner Image (For Desktop)",name:"desktopBanner",valuePropName:"fileList",getValueFromEvent:r=>r?.fileList,rules:[{required:!0}],children:e.jsx(f,{listType:"picture",beforeUpload:()=>!1,className:"upload-banner-image",children:e.jsxs("div",{className:"upload-banner",children:[e.jsx("img",{src:x,alt:"Upload",className:"desktop-image"}),e.jsxs("div",{children:["Upload Image",e.jsx("br",{}),"(Size 430px * 200px)"]})]})})}),e.jsx(n.Item,{label:"Upload Banner Image (For Mobile)",name:"mobileBanner",valuePropName:"fileList",getValueFromEvent:r=>r?.fileList,rules:[{required:!0}],children:e.jsx(f,{listType:"picture",beforeUpload:()=>!1,className:"upload-banner-image",children:e.jsxs("div",{className:"upload-banner",children:[e.jsx("img",{src:x,alt:"Upload",className:"desktop-image"}),e.jsxs("div",{children:["Upload Image",e.jsx("br",{}),"(Size 430px * 200px)"]})]})})})]}),e.jsx(n.Item,{style:{textAlign:"center"},children:e.jsx(L,{loading:b,type:"primary",htmlType:"submit",className:"submit-btn",children:"UPDATE VENDOR BANNER"})})]})]})}export{re as default};
