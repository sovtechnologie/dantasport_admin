import{a as U,b as X,r as i,j as e,a0 as w,B as x,A as V,R as q,T as f,cF as g,a4 as Z,S as ee,a2 as z,m as se}from"./index-XzM8Cj3c.js";/* empty css               */import{a as te}from"./useFetchvendorVenues-D949lnpY.js";import{u as ae}from"./useQuery-Beh9q-Hu.js";import{h as ie,i as oe}from"./endpointApi-DBrVeqMh.js";import{s as r}from"./index-Yvuj0Esb.js";import{S as k}from"./index-Ci-vNBFy.js";import{F as ne,P as le}from"./Table-Dv9gfO7j.js";import{B as ce}from"./index-D8JKXGq0.js";import{T as H}from"./index-B9zQjaED.js";import{R as I}from"./EyeOutlined-BVmecd_y.js";import{R as re}from"./DeleteOutlined-Ke0rSpX_.js";import{M as de}from"./index-BTmfCYkW.js";import{I as me}from"./index-CthMyroC.js";import"./useMutation-CNNl5TnA.js";import"./ExclamationCircleFilled-D7dRXMD9.js";import"./InfoCircleFilled-Ce5_6Fhy.js";import"./SearchOutlined-B0571LVy.js";import"./addEventListener-kraIZfrw.js";import"./index-V8rTfzId.js";import"./useBubbleLock-B-1WFybW.js";import"./index-BZS9dDwd.js";import"./useForm-EwlPOCpB.js";import"./extendsObject-78o_rR5W.js";import"./Input-BUj1c9yh.js";import"./useClosable-B4NhgZhJ.js";import"./ActionButton-DmSr_qh1.js";import"./Skeleton-BxJpOdZN.js";import"./index-BfZvbS5e.js";import"./fade-_qbex92f.js";const he=({gymId:n,type:p="gym"})=>ae({queryKey:["gymCoaches",n,p],queryFn:()=>ie({gymId:n,type:p}),enabled:!!n,staleTime:5*60*1e3,cacheTime:10*60*1e3,retry:2,onError:a=>{console.error("Failed to fetch gym coaches:",a)}}),{Option:J}=k;function He(){const n=U(),p=X(s=>s.auth.user.id),[a,R]=i.useState(null),[G,T]=i.useState(1),[j,xe]=i.useState(4),[F,D]=i.useState(!1),[K,B]=i.useState(!1),[o,A]=i.useState(null),[d,L]=i.useState(!1),[v,P]=i.useState(null),{data:l,isLoading:m,isFetching:ge,error:W}=te(p),{data:h,isLoading:C,isFetching:b,error:E,refetch:y}=he({gymId:a,type:"gym"});i.useEffect(()=>{l?.result?.length&&!a&&R(l.result[0].Id)},[l,a]),i.useEffect(()=>{a&&y()},[a,y]);const $=s=>{D(!0),R(s),T(1),setTimeout(()=>{D(!1)},500)};i.useEffect(()=>{W&&r.error("Failed to load gym list"),E&&r.error("Failed to load gym coaches list")},[W,E]);const S=i.useMemo(()=>l?.result?.find(s=>s.Id===a),[l?.result,a]),u=i.useMemo(()=>h?.result?h.result.map(s=>({id:s.id,coaches_name:s.coaches_name,coaches_type:s.coaches_type,coaches_image:s.coaches_image,status:s.status,created_at:s.created_at,updated_at:s.updated_at,gym_id:s.gym_id,type:s.type,raw:s})):[],[h?.result]),N=(G-1)*j,_=u.slice(N,N+j),M=i.useCallback(()=>{if(!a){r.warning("Please select a gym first");return}n("/vendor/gym/addcoach")},[a,n]),O=i.useCallback(s=>{const t=u.find(c=>c.id===s);t?n(`/vendor/gym/editcoach/${s}`,{state:{coachData:t,coachId:s}}):n(`/vendor/gym/editcoach/${s}`)},[n,u]),Q=i.useCallback(s=>{console.log("👁️ Viewing gym coach:",s),A(s),B(!0)},[]),Y=i.useCallback(async s=>{try{P(s.id),L(!0);const t=new FormData;t.append("coachesId",s.id),t.append("status","0");const c=await oe(t);c.status===200||c.status===201?(r.success("Gym coach deleted successfully"),await y()):r.error(c.message||"Failed to delete gym coach")}catch(t){console.error("❌ Failed to delete coach:",t),r.error(t?.response?.data?.message||"Failed to delete gym coach")}finally{P(null),L(!1)}},[y]);return m?e.jsx("div",{className:"venue-card",children:e.jsxs("div",{className:"page-loading-container",children:[e.jsx(w,{size:"large"}),e.jsx("div",{className:"page-loading-text",children:"Loading gyms..."})]})}):!a||F||a&&C||a&&!h?e.jsxs("div",{className:"venue-card",children:[e.jsxs("div",{className:"venue-toolbar",children:[e.jsx(k,{placeholder:"Select Gym",className:"venue-select",loading:m,onChange:$,value:a||void 0,disabled:m||!l?.result?.length,children:l?.result?.map(s=>e.jsx(J,{value:s.Id,children:s.gym_name},s.Id))}),e.jsx(x,{type:"primary",className:"add-btn",disabled:!a,onClick:M,children:"+ Add Gym Coach"})]}),e.jsx("h3",{className:"venue-title",children:S?.gym_name||"Select a gym to view coaches"}),e.jsxs("div",{className:"page-loading-container",children:[e.jsx(w,{size:"large"}),e.jsx("div",{className:"page-loading-text",children:a?F?"Switching gym...":a&&!h?"Fetching gym coaches...":"Loading coaches...":"Please select a gym to view coaches"})]})]}):e.jsxs("div",{className:"venue-card",children:[e.jsxs("div",{className:"venue-toolbar",children:[e.jsx(k,{placeholder:"Select Gym",className:"venue-select",loading:m,onChange:$,value:a||void 0,disabled:m||!l?.result?.length,children:l?.result?.map(s=>e.jsx(J,{value:s.Id,children:s.gym_name},s.Id))}),e.jsxs(x,{type:"primary",className:"add-btn",disabled:!a||d||b,onClick:M,children:["+ Add Gym Coach",d&&e.jsx("span",{className:"processing-indicator",children:" (Processing...)"})]})]}),e.jsxs("h3",{className:"venue-title",children:[S?.gym_name||"Select a gym to view coaches",b&&!C&&e.jsx(w,{size:"small",style:{marginLeft:8}})]}),e.jsx("div",{className:"members-table-container",children:_?.length>0?e.jsx(ne,{dataSource:_,columns:[{title:"Coach",key:"coach",width:250,render:(s,t,c)=>e.jsxs("div",{className:"member-info-cell",children:[e.jsx(V,{size:40,src:t.coaches_image&&t.coaches_image!=="coachimage"?t.coaches_image:null,icon:e.jsx(q,{}),style:{backgroundColor:"#1163C7",marginRight:12}}),e.jsxs("div",{className:"member-details",children:[e.jsxs("div",{className:"member-name",children:[e.jsx(f.Text,{strong:!0,children:t.coaches_name}),e.jsx(ce,{count:N+c+1,style:{backgroundColor:"#1163C7",marginLeft:8},size:"small"})]}),e.jsx("div",{className:"member-id",children:e.jsxs(f.Text,{type:"secondary",style:{fontSize:"12px"},children:["ID: ",t.id]})})]})]})},{title:"Type",key:"type",width:150,render:(s,t)=>e.jsx("div",{className:"type-cell",children:e.jsxs("div",{className:"type-item",children:[e.jsx(g,{style:{color:"#1163C7",marginRight:6}}),e.jsx(f.Text,{children:t.coaches_type})]})})},{title:"Status",key:"status",width:100,render:(s,t)=>e.jsx(H,{color:t.status===1?"green":"red",style:{borderRadius:12},children:t.status===1?"Active":"Inactive"})},{title:"Joined",key:"joined",width:120,render:(s,t)=>e.jsxs("div",{className:"joined-cell",children:[e.jsx(Z,{style:{color:"#1163C7",marginRight:4}}),e.jsx(f.Text,{type:"secondary",style:{fontSize:"12px"},children:t.created_at?new Date(t.created_at).toLocaleDateString():"N/A"})]})},{title:"Actions",key:"actions",width:120,render:(s,t)=>e.jsxs(ee,{size:"small",children:[e.jsx(z,{title:"View Details",children:e.jsx(x,{type:"text",icon:e.jsx(I,{}),size:"small",disabled:d,onClick:()=>Q(t),className:"action-btn view-btn"})}),e.jsx(z,{title:"Edit Gym Coach",children:e.jsx(x,{type:"text",icon:e.jsx(se,{}),size:"small",disabled:d,onClick:()=>O(t.id),className:"action-btn edit-btn"})}),e.jsx(z,{title:v===t.id?"Deleting...":"Delete Gym Coach",children:e.jsx(x,{type:"text",danger:!0,icon:e.jsx(re,{}),size:"small",loading:v===t.id,disabled:v===t.id||d,onClick:()=>Y(t),className:"action-btn delete-btn"})})]})}],pagination:!1,rowKey:"id",className:"enterprise-members-table",size:"middle",loading:C||b}):e.jsx("div",{className:"empty-state-container",children:e.jsxs("div",{className:"empty-state-content",children:[e.jsx("div",{className:"empty-state-icon",children:e.jsx(g,{})}),e.jsx("h3",{className:"empty-state-title",children:"No Gym Coaches Found"}),e.jsx("p",{className:"empty-state-description",children:`This gym doesn't have any coaches yet. Click the "ADD GYM COACH" button to add your first coach.`}),e.jsxs("div",{className:"empty-state-info",children:[e.jsxs("div",{className:"info-item",children:[e.jsx("span",{className:"info-label",children:"Coach Types:"}),e.jsx("span",{className:"info-value",children:"Head Trainer, Personal Trainer, Yoga Instructor"})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("span",{className:"info-label",children:"Requirements:"}),e.jsx("span",{className:"info-value",children:"Certification, Experience, Specialization"})]})]})]})})}),_?.length>0&&e.jsx("div",{className:"members-footer",children:e.jsx(le,{current:G,pageSize:j,total:u.length,onChange:s=>T(s),showSizeChanger:!1,showQuickJumper:!1,showTotal:(s,t)=>`${t[0]}-${t[1]} of ${s} coaches`})}),e.jsx(de,{title:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(g,{style:{color:"#1163C7"}}),"Gym Coach Details - ",o?.coaches_name]}),open:K,onCancel:()=>{B(!1),A(null)},footer:null,width:"auto",centered:!0,style:{maxWidth:"90vw"},children:o&&e.jsxs("div",{style:{maxWidth:"600px",margin:"0 auto"},children:[e.jsxs("div",{style:{marginBottom:"24px",padding:"24px",background:"linear-gradient(135deg, #1163C7 0%, #0d4a9e 100%)",borderRadius:"16px",color:"white",textAlign:"center",boxShadow:"0 8px 32px rgba(17, 99, 199, 0.3)"},children:[e.jsx("div",{style:{marginBottom:"16px"},children:e.jsx(V,{size:80,src:o.coaches_image&&o.coaches_image!=="coachimage"?o.coaches_image:null,icon:e.jsx(g,{}),style:{backgroundColor:"rgba(255, 255, 255, 0.2)",border:"3px solid rgba(255, 255, 255, 0.3)"}})}),e.jsx("h2",{style:{margin:"0 0 8px 0",color:"white",fontSize:"24px",fontWeight:"600"},children:o.coaches_name}),e.jsxs("div",{style:{display:"inline-block",padding:"6px 16px",backgroundColor:"rgba(255, 255, 255, 0.2)",borderRadius:"20px",fontSize:"14px",fontWeight:"500"},children:["Coach ID: ",o.id]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",marginBottom:"24px"},children:[e.jsxs("div",{style:{padding:"20px",backgroundColor:"#f8f9fa",borderRadius:"12px",border:"1px solid #e9ecef"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"16px",color:"#1163C7",fontWeight:"600",fontSize:"16px"},children:[e.jsx(g,{style:{marginRight:"8px",fontSize:"18px"}}),"Coach Information"]}),e.jsxs("div",{style:{marginBottom:"12px"},children:[e.jsx("div",{style:{fontSize:"12px",color:"#6c757d",marginBottom:"4px"},children:"Coach Type"}),e.jsx("div",{style:{fontSize:"16px",fontWeight:"500",color:"#212529"},children:o.coaches_type})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"12px",color:"#6c757d",marginBottom:"4px"},children:"Gym"}),e.jsx("div",{style:{fontSize:"16px",fontWeight:"500",color:"#212529"},children:S?.gym_name})]})]}),e.jsxs("div",{style:{padding:"20px",backgroundColor:"#f8f9fa",borderRadius:"12px",border:"1px solid #e9ecef"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"16px",color:"#1163C7",fontWeight:"600",fontSize:"16px"},children:[e.jsx(q,{style:{marginRight:"8px",fontSize:"18px"}}),"Status Information"]}),e.jsxs("div",{style:{marginBottom:"12px"},children:[e.jsx("div",{style:{fontSize:"12px",color:"#6c757d",marginBottom:"4px"},children:"Status"}),e.jsx("div",{style:{fontSize:"16px",fontWeight:"500",color:"#212529"},children:e.jsx(H,{color:o.status===1?"green":"red",style:{borderRadius:12},children:o.status===1?"Active":"Inactive"})})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"12px",color:"#6c757d",marginBottom:"4px"},children:"Joined Date"}),e.jsx("div",{style:{fontSize:"16px",fontWeight:"500",color:"#212529"},children:o.created_at?new Date(o.created_at).toLocaleDateString():"N/A"})]})]})]}),o.coaches_image&&o.coaches_image!=="coachimage"&&e.jsxs("div",{style:{padding:"20px",backgroundColor:"#f8f9fa",borderRadius:"12px",border:"1px solid #e9ecef",textAlign:"center"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"16px",color:"#1163C7",fontWeight:"600",fontSize:"16px"},children:[e.jsx(I,{style:{marginRight:"8px",fontSize:"18px"}}),"Coach Photo"]}),e.jsx("div",{children:e.jsx(me,{src:o.coaches_image,alt:`${o.coaches_name} photo`,style:{maxWidth:"250px",maxHeight:"250px",objectFit:"contain",border:"2px solid #e9ecef",borderRadius:"12px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)"},preview:{mask:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",color:"white",fontWeight:"500"},children:[e.jsx(I,{}),"Click to view full size"]})}})})]})]})})]})}export{He as default};
