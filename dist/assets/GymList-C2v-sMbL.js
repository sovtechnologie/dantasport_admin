import{r as a,I as te,_ as se,a as Ae,b as ve,j as e,a0 as V,B as o,S as U,D as J,bE as r,T as v,a2 as K,bX as be,R as ke,m as we}from"./index-XzM8Cj3c.js";import{a as Se,b as Ce}from"./useFetchvendorVenues-D949lnpY.js";import{S as b}from"./index-Ci-vNBFy.js";import{F as I}from"./Table-Dv9gfO7j.js";import{R as X,C as h}from"./row-CTTWbxgc.js";import{C as k}from"./index-C1XA4k9t.js";import{S as N}from"./index-CCwbS7V6.js";import{I as Ie}from"./index-Vt2X7eqz.js";import{a as Ne}from"./SearchOutlined-B0571LVy.js";import{R as Te}from"./ReloadOutlined-2S6DfmwU.js";import{R as Z}from"./PlusOutlined-Dj0tFLrA.js";import{M as ee}from"./index-BTmfCYkW.js";import{s as g}from"./index-Yvuj0Esb.js";import{I as Be}from"./index-CthMyroC.js";import{R as De}from"./EnvironmentOutlined-C2UmvkKy.js";import{T as Y}from"./index-B9zQjaED.js";import{R as Le}from"./DeleteOutlined-Ke0rSpX_.js";import"./useQuery-Beh9q-Hu.js";import"./useMutation-CNNl5TnA.js";import"./addEventListener-kraIZfrw.js";import"./index-V8rTfzId.js";import"./useBubbleLock-B-1WFybW.js";import"./index-BZS9dDwd.js";import"./useForm-EwlPOCpB.js";import"./extendsObject-78o_rR5W.js";import"./Input-BUj1c9yh.js";import"./index-BfZvbS5e.js";import"./Skeleton-BxJpOdZN.js";import"./EyeOutlined-BVmecd_y.js";import"./ExclamationCircleFilled-D7dRXMD9.js";import"./InfoCircleFilled-Ce5_6Fhy.js";import"./ActionButton-DmSr_qh1.js";import"./useClosable-B4NhgZhJ.js";import"./fade-_qbex92f.js";var Fe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880.1 154H143.9c-24.5 0-39.8 26.7-27.5 48L349 597.4V838c0 17.7 14.2 32 31.8 32h262.4c17.6 0 31.8-14.3 31.8-32V597.4L907.7 202c12.2-21.3-3.1-48-27.6-48zM603.4 798H420.6V642h182.9v156zm9.6-236.6l-9.5 16.6h-183l-9.5-16.6L212.7 226h598.6L613 561.4z"}}]},name:"filter",theme:"outlined"},Re=function(p,y){return a.createElement(te,se({},p,{ref:y,icon:Fe}))},Ge=a.forwardRef(Re),Me={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M456 231a56 56 0 10112 0 56 56 0 10-112 0zm0 280a56 56 0 10112 0 56 56 0 10-112 0zm0 280a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"more",theme:"outlined"},Ee=function(p,y){return a.createElement(te,se({},p,{ref:y,icon:Me}))},Oe=a.forwardRef(Ee);function ft(){const[l,p]=a.useState([]),[y,P]=a.useState([]),[ae,T]=a.useState(!1),[u,le]=a.useState([]),[c,B]=a.useState(""),[w,D]=a.useState("all"),[f,L]=a.useState("all"),[S,F]=a.useState("all"),[j,ie]=a.useState(""),[A,W]=a.useState(""),[R,ne]=a.useState(!1),[oe,G]=a.useState(!1),[M,E]=a.useState(null),O=Ae(),{Option:i}=b,re=ve(s=>s.auth.user.id),{data:_,isLoading:z,isFetching:q,error:ce,refetch:Q}=Se(re),H=Ce();a.useEffect(()=>{if(_?.result){const s=_.result.map((t,d)=>({key:t.Id||d,id:t.Id,vendorId:t.vendor_id,gymName:t.gym_name,mobileImage:t.mobile_image,desktopImage:t.desktop_image,aboutGym:t.about_gym,onlyWomen:t.only_women===1,lat:t.lat,lng:t.lng,city:t.city||"N/A",state:t.state||"N/A",area:t.area||"N/A",fullAddress:t.full_address,startTime:t.start_time,endTime:t.end_time,isBookable:t.is_bookable===1,status:t.status===1?"Active":"Inactive",isDelete:t.is_delete===1,createdAt:t.create_at,termAndConditions:t.term_and_conditions,cancellationPolicy:t.cancellation_policy}));p(s),P(s)}},[_]),a.useEffect(()=>{let s=[...l];c&&(s=s.filter(t=>t.gymName.toLowerCase().includes(c.toLowerCase())||t.city.toLowerCase().includes(c.toLowerCase())||t.state.toLowerCase().includes(c.toLowerCase())||t.area.toLowerCase().includes(c.toLowerCase())||t.aboutGym&&t.aboutGym.toLowerCase().includes(c.toLowerCase()))),w!=="all"&&(s=s.filter(t=>t.status===w)),f!=="all"&&(f==="women-only"?s=s.filter(t=>t.onlyWomen):f==="mixed"&&(s=s.filter(t=>!t.onlyWomen))),S!=="all"&&(s=s.filter(t=>S==="bookable"?t.isBookable:!t.isBookable)),j&&A&&s.sort((t,d)=>{let n=t[j],m=d[j];return typeof n=="string"&&(n=n.toLowerCase(),m=m.toLowerCase()),A==="asc"?n>m?1:-1:n<m?1:-1}),P(s)},[l,c,w,f,S,j,A]);const C=a.useMemo(()=>{const s=l.length,t=l.filter(x=>x.status==="Active").length,d=l.filter(x=>x.status==="Inactive").length,n=l.filter(x=>x.isBookable).length,m=l.filter(x=>x.onlyWomen).length;return{total:s,active:t,inactive:d,bookable:n,womenOnly:m}},[l]),de=(s,t)=>{T(!0)},me=()=>{T(!1)},he=s=>{B(s)},$=(s,t)=>{switch(s){case"status":D(t);break;case"type":L(t);break;case"bookable":F(t);break}},ye=s=>{j===s?W(A==="asc"?"desc":"asc"):(ie(s),W("asc"))},ue=s=>{if(u.length===0){g.warning("Please select gyms to perform this action");return}switch(s){case"delete":g.info(`Delete ${u.length} gyms - Feature coming soon`);break;case"activate":g.info(`Activate ${u.length} gyms - Feature coming soon`);break;case"deactivate":g.info(`Deactivate ${u.length} gyms - Feature coming soon`);break}},xe=s=>{E(s),G(!0)},ge=async()=>{if(M)try{await H.mutateAsync({gymId:M.id,isDelete:1}),g.success("Gym deleted successfully!"),G(!1),E(null),Q()}catch(s){console.error("Error deleting gym:",s),g.error("Failed to delete gym. Please try again.")}},je=()=>{G(!1),E(null)},pe={selectedRowKeys:u,onChange:le,selections:[I.SELECTION_ALL,I.SELECTION_INVERT,I.SELECTION_NONE]},fe=[{title:e.jsxs("span",{className:"sortable-header",onClick:()=>ye("gymName"),style:{cursor:"pointer"},children:["Gym Info",j==="gymName"&&e.jsx("span",{style:{marginLeft:4},children:A==="asc"?"↑":"↓"})]}),key:"gymInfo",sorter:(s,t)=>s.gymName.localeCompare(t.gymName),render:(s,t)=>e.jsxs("div",{className:"gym-info-cell",children:[t.mobileImage&&e.jsx(K,{title:"Click to view full image",children:e.jsx(Be,{width:50,height:50,src:t.mobileImage,alt:t.gymName,className:"gym-image",fallback:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMIAAADDCAYAAADQvc6UAAABRWlDQ1BJQ0MgUHJvZmlsZQAAKJFjYGASSSwoyGFhYGDIzSspCnJ3UoiIjFJgf8LAwSDCIMogwMCcmFxc4BgQ4ANUwgCjUcG3awyMIPqyLsis7PPOq3QdDFcvjV3jOD1boQVTPQrgSkktTgbSf4A4LbmgqISBgTEFyFYuLykAsTuAbJEioKOA7DkgdjqEvQHEToKwj4DVhAQ5A9k3gGyB5IxEoBmML4BsnSQk8XQkNtReEOBxcfXxUQg1Mjc0dyHgXNJBSWpFCYh2zi+oLMpMzyhRcASGUqqCZ16yno6CkYGRAQMDKMwhqj/fAIcloxgHQqxAjIHBEugw5sUIsSQpBobtQPdLciLEVJYzMPBHMDBsayhILEqEO4DxG0txmrERhM29nYGBddr//5/DGRjYNRkY/l7////39v///y4Dmn+LgeHANwDrkl1AuO+pmgAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAwqADAAQAAAABAAAAwwAAAAD9b/HnAAAHlklEQVR4Ae3dP3Ik1RnG4W+FgYxN"})}),e.jsxs("div",{className:"gym-details",children:[e.jsx("div",{className:"gym-name",children:t.gymName}),e.jsxs("div",{className:"gym-id",children:["ID: ",t.id]}),t.aboutGym&&e.jsx(K,{title:t.aboutGym,children:e.jsx("div",{className:"gym-description",children:t.aboutGym})})]})]})},{title:"Location",key:"location",render:(s,t)=>e.jsxs("div",{className:"location-cell",children:[e.jsxs("div",{className:"location-main",children:[e.jsx(De,{style:{fontSize:12,color:"#666"}}),e.jsxs("span",{children:[t.city,", ",t.state]})]}),t.area&&t.area!=="N/A"&&e.jsxs("div",{className:"location-area",children:["Area: ",t.area]})]})},{title:"Timings",key:"timings",render:(s,t)=>e.jsxs("div",{className:"timings-cell",children:[e.jsx(be,{style:{fontSize:12,color:"#666"}}),e.jsxs("div",{children:[e.jsxs("div",{className:"timings-text",children:[t.startTime," - ",t.endTime]}),e.jsx(Y,{color:t.isBookable?"green":"red",size:"small",children:t.isBookable?"Bookable":"Not Bookable"})]})]})},{title:"Type",key:"type",render:(s,t)=>e.jsxs("div",{className:"type-cell",children:[t.onlyWomen&&e.jsx(Y,{color:"pink",icon:e.jsx(ke,{}),children:"Women Only"}),e.jsx(Y,{color:t.status==="Active"?"green":"red",children:t.status})]})},{title:"Status",key:"status",render:(s,t)=>e.jsxs(b,{value:s,onChange:d=>de(),className:`status-select ${s==="Active"?"status-active":"status-inactive"}`,style:{width:100},children:[e.jsx(i,{value:"Active",children:"Active"}),e.jsx(i,{value:"Inactive",children:"Inactive"})]})},{title:"Action",key:"action",render:(s,t)=>{const d=({key:m})=>{switch(m){case"edit":O(`/vendor/gym/edit/${t.id}`,{state:{gymData:t}});break;case"delete":xe(t);break}},n=e.jsxs(r,{onClick:d,children:[e.jsx(r.Item,{icon:e.jsx(we,{}),children:"Edit Gym"},"edit"),e.jsx(r.Divider,{}),e.jsx(r.Item,{icon:e.jsx(Le,{}),danger:!0,children:"Delete"},"delete")]});return e.jsx(J,{overlay:n,trigger:["click"],children:e.jsx(o,{type:"text",icon:e.jsx(Oe,{}),className:"action-button",title:"More actions"})})}}];return z?e.jsx("div",{className:"venue-card",children:e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:240,flexDirection:"column"},children:[e.jsx(V,{size:"large"}),e.jsx("div",{style:{marginTop:8,color:"#666"},children:"Loading gyms..."})]})}):e.jsxs("div",{className:"venue-card gym-list-container",children:[e.jsxs(X,{gutter:16,style:{marginBottom:24},children:[e.jsx(h,{xs:24,sm:12,md:6,children:e.jsx(k,{size:"small",children:e.jsx(N,{title:"Total Gyms",value:C.total,valueStyle:{color:"#1890ff"}})})}),e.jsx(h,{xs:24,sm:12,md:6,children:e.jsx(k,{size:"small",children:e.jsx(N,{title:"Active",value:C.active,valueStyle:{color:"#52c41a"}})})}),e.jsx(h,{xs:24,sm:12,md:6,children:e.jsx(k,{size:"small",children:e.jsx(N,{title:"Bookable",value:C.bookable,valueStyle:{color:"#722ed1"}})})}),e.jsx(h,{xs:24,sm:12,md:6,children:e.jsx(k,{size:"small",children:e.jsx(N,{title:"Women Only",value:C.womenOnly,valueStyle:{color:"#eb2f96"}})})})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16,flexWrap:"wrap",gap:16},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16,flexWrap:"wrap"},children:[e.jsxs("h3",{style:{margin:0},children:["Gym List ",q&&!z&&e.jsx(V,{size:"small",style:{marginLeft:8}})]}),e.jsx(Ie,{placeholder:"Search gyms...",prefix:e.jsx(Ne,{}),value:c,onChange:s=>he(s.target.value),style:{width:250},allowClear:!0}),e.jsx(o,{icon:e.jsx(Ge,{}),onClick:()=>ne(!R),type:R?"primary":"default",children:"Filters"})]}),e.jsxs(U,{children:[u.length>0&&e.jsx(J,{overlay:e.jsxs(r,{onClick:({key:s})=>ue(s),children:[e.jsx(r.Item,{children:"Activate Selected"},"activate"),e.jsx(r.Item,{children:"Deactivate Selected"},"deactivate"),e.jsx(r.Divider,{}),e.jsx(r.Item,{danger:!0,children:"Delete Selected"},"delete")]}),children:e.jsxs(o,{children:["Bulk Actions (",u.length,")"]})}),e.jsx(o,{icon:e.jsx(Te,{}),onClick:()=>Q(),children:"Refresh"}),e.jsx(o,{type:"primary",icon:e.jsx(Z,{}),onClick:()=>O("/vendor/gym/add"),children:"Add Gym"})]})]}),R&&e.jsx(k,{size:"small",style:{marginBottom:16},children:e.jsxs(X,{gutter:16,children:[e.jsx(h,{xs:24,sm:8,md:6,children:e.jsxs("div",{style:{marginBottom:8},children:[e.jsx("label",{children:"Status:"}),e.jsxs(b,{value:w,onChange:s=>$("status",s),style:{width:"100%",marginTop:4},children:[e.jsx(i,{value:"all",children:"All Status"}),e.jsx(i,{value:"Active",children:"Active"}),e.jsx(i,{value:"Inactive",children:"Inactive"})]})]})}),e.jsx(h,{xs:24,sm:8,md:6,children:e.jsxs("div",{style:{marginBottom:8},children:[e.jsx("label",{children:"Type:"}),e.jsxs(b,{value:f,onChange:s=>$("type",s),style:{width:"100%",marginTop:4},children:[e.jsx(i,{value:"all",children:"All Types"}),e.jsx(i,{value:"women-only",children:"Women Only"}),e.jsx(i,{value:"mixed",children:"Mixed"})]})]})}),e.jsx(h,{xs:24,sm:8,md:6,children:e.jsxs("div",{style:{marginBottom:8},children:[e.jsx("label",{children:"Booking:"}),e.jsxs(b,{value:S,onChange:s=>$("bookable",s),style:{width:"100%",marginTop:4},children:[e.jsx(i,{value:"all",children:"All"}),e.jsx(i,{value:"bookable",children:"Bookable"}),e.jsx(i,{value:"not-bookable",children:"Not Bookable"})]})]})}),e.jsx(h,{xs:24,sm:24,md:6,children:e.jsx("div",{style:{marginBottom:8,display:"flex",alignItems:"end",height:"100%"},children:e.jsx(o,{onClick:()=>{B(""),D("all"),L("all"),F("all")},style:{width:"100%"},children:"Clear Filters"})})})]})}),q&&!z&&e.jsx("div",{className:"refresh-overlay",children:e.jsxs("div",{className:"refresh-content",children:[e.jsx(V,{size:"large"}),e.jsx("div",{className:"refresh-text",children:"Refreshing gym list..."})]})}),ce?e.jsxs("div",{style:{padding:16},children:[e.jsx(v.Text,{type:"danger",children:"Failed to load gyms."}),e.jsx("div",{style:{marginTop:8},children:e.jsx(o,{onClick:()=>Q(),type:"default",children:"Retry"})})]}):e.jsx(e.Fragment,{children:y&&y.length>0?e.jsx(I,{columns:fe,dataSource:y,pagination:{pageSize:10,showSizeChanger:!0,showQuickJumper:!0,showTotal:(s,t)=>`${t[0]}-${t[1]} of ${s} gyms`},rowKey:"key",scroll:{x:!0},rowSelection:pe,size:"middle"}):e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-state-title",children:l.length===0?"No Gyms Found":"No Gyms Match Your Filters"}),e.jsx("div",{className:"empty-state-description",children:l.length===0?'You have not added any gyms yet. Click the "Add Gym" button to create your first gym.':"Try adjusting your search criteria or filters to find gyms."}),e.jsxs(U,{children:[l.length>0&&e.jsx(o,{onClick:()=>{B(""),D("all"),L("all"),F("all")},children:"Clear Filters"}),e.jsx(o,{type:"primary",icon:e.jsx(Z,{}),onClick:()=>O("/vendor/gym/add"),children:"Add Gym"})]})]})}),e.jsx(ee,{open:ae,title:"Change Gym Status",onOk:()=>{g.success("Status change request sent to administrator"),T(!1)},onCancel:me,okText:"Send Request",cancelText:"Cancel",width:500,children:e.jsxs("div",{style:{padding:"16px 0"},children:[e.jsx(v.Paragraph,{children:"To change the status of your gym, please contact your administrator. This ensures proper verification and compliance with platform policies."}),e.jsx(v.Text,{type:"secondary",children:"You can reach out to support or use the contact information provided in your dashboard."})]})}),e.jsx(ee,{open:oe,title:"Delete Gym",onOk:ge,onCancel:je,okText:"Delete",cancelText:"Cancel",okButtonProps:{danger:!0,loading:H.isPending},width:500,children:e.jsxs("div",{style:{padding:"16px 0"},children:[e.jsxs(v.Paragraph,{children:["Are you sure you want to delete the gym ",e.jsxs("strong",{children:['"',M?.gymName,'"']}),"?"]}),e.jsx(v.Text,{type:"secondary",children:"This action cannot be undone. The gym will be permanently removed from your account."})]})})]})}export{ft as default};
