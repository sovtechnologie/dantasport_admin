import{a as F,r as C,j as e,B as j}from"./index-XzM8Cj3c.js";/* empty css                 */import{u as w}from"./useMutation-CNNl5TnA.js";import{C as q}from"./endpointApi-CRaEXM59.js";import{u as P}from"./useGetAllVendor-Dv7Di3PL.js";import{G as A}from"./GooglePlacesAutocomplete-BY2BgwQL.js";import{F as s}from"./index-BLf5ALDk.js";import{R as i,C as t}from"./row-CTTWbxgc.js";import{S as f}from"./index-Ci-vNBFy.js";import{I as a}from"./index-Vt2X7eqz.js";import{R as L}from"./DeleteOutlined-Ke0rSpX_.js";import{s as g}from"./index-Yvuj0Esb.js";import"./useQuery-Beh9q-Hu.js";import"./useForm-EwlPOCpB.js";import"./ExclamationCircleFilled-D7dRXMD9.js";import"./index-BfZvbS5e.js";import"./SearchOutlined-B0571LVy.js";import"./Input-BUj1c9yh.js";import"./EyeOutlined-BVmecd_y.js";import"./InfoCircleFilled-Ce5_6Fhy.js";const R=()=>w({mutationKey:["createVenue"],mutationFn:n=>{if(!n)throw new Error("Payload is required to create a venue");return q(n)},onSuccess:n=>{console.log("Venue created successfully",n)},onError:n=>{console.error("Error creating venue",n)}}),{Option:k}=f;function M({form:n,onPlaceSelect:u}){const l=n.getFieldValue("search")||"",c=m=>{n.setFieldsValue({search:m.target.value})};return e.jsxs(e.Fragment,{children:[e.jsx(s.Item,{name:"search",label:"Location",children:e.jsx(A,{onPlaceSelect:u,placeholder:"Search your address",value:l,onChange:c,border:!0})}),e.jsx(s.Item,{name:"latitude",hidden:!0,children:e.jsx(a,{})}),e.jsx(s.Item,{name:"longitude",hidden:!0,children:e.jsx(a,{})})]})}function ne({vendorId:n}){const u=F(),[l]=s.useForm(),[c,m]=C.useState({latitude:18.5204,longitude:73.8567}),{data:h,isLoading:I}=P();console.log("vendorlist",h?.result);const b=({address:r,area:o,city:d,state:N,pincode:E,latitude:p,longitude:x,search:S})=>{l.setFieldsValue({address:r,area:o,city:d,state:N,pincode:E,latitude:p,longitude:x,search:S}),p&&x&&m({latitude:p,longitude:x})},v=`https://maps.google.com/maps?q=${c.latitude},${c.longitude}&z=15&output=embed`,{mutate:y,isLoading:O}=R(),V=r=>{console.log("Form values:",r);const o={venueName:r.venueName,latitude:r.latitude,longitude:r.longitude,fullAddress:r.address,area:r.area,city:r.city,state:r.state,pincode:Number(r.pincode),vendorId:Number(r.vendorId),bookingPolicy:r.bookingPolicy};y(o,{onSuccess:()=>{g.success("Venue created successfully"),l.resetFields(),u("/admin/venues")},onError:d=>{g.error(d?.response?.data?.message||"Failed to create venue")}})};return e.jsxs(s,{form:l,layout:"vertical",onFinish:V,children:[e.jsx("div",{className:"venue-form",children:e.jsxs(i,{gutter:16,children:[e.jsx(t,{span:12,children:e.jsx(s.Item,{label:"Select Vendor",name:"vendorName",rules:[{required:!0,message:"Please select a vendor"}],children:e.jsx(f,{showSearch:!0,placeholder:"Select a vendor",optionFilterProp:"children",filterOption:(r,o)=>o.children.toLowerCase().includes(r.toLowerCase()),loading:I,allowClear:!0,onChange:r=>{const o=h?.result?.find(d=>d.id===r);l.setFieldsValue({vendorId:o?.id||"",vendorName:o?.full_name||""})},children:h?.result?.map(r=>e.jsx(k,{value:r.id,children:`${r.full_name} (${r.id})`},r.id))})})}),e.jsx(t,{span:12,children:e.jsx(s.Item,{label:"Enter Vendor ID",name:"vendorId",rules:[{required:!0}],children:e.jsx(a,{})})})]})}),e.jsxs("div",{className:"venue-form",children:[e.jsxs(i,{gutter:[16,16],align:"bottom",children:[e.jsx(t,{span:12,children:e.jsx(s.Item,{label:"Enter Venue Name",name:"venueName",rules:[{required:!0}],children:e.jsx(a,{})})}),e.jsx(t,{span:12,children:e.jsx(s.Item,{className:"remove-btn-wrapper",children:e.jsx(j,{type:"primary",className:"remove-btn",icon:e.jsx(L,{}),children:"REMOVE VENUES"})})})]}),e.jsx("h3",{className:"section-title",children:"Location Info"}),e.jsxs(i,{gutter:16,children:[e.jsx(t,{span:12,children:e.jsx(s.Item,{name:"address",rules:[{required:!0}],label:"Enter Full Address*",children:e.jsx(a.TextArea,{placeholder:"Address, Street, etc.",allowClear:!0})})}),e.jsx(t,{span:12,children:e.jsx(M,{form:l,onPlaceSelect:b})})]}),e.jsxs(i,{gutter:16,children:[e.jsxs(t,{span:12,children:[e.jsxs(i,{gutter:16,children:[e.jsx(t,{span:12,children:e.jsx(s.Item,{label:"Area",name:"area",rules:[{required:!0}],children:e.jsx(a,{placeholder:"Enter Area"})})}),e.jsx(t,{span:12,children:e.jsx(s.Item,{label:"City",name:"city",rules:[{required:!0}],children:e.jsx(a,{placeholder:"Enter City"})})})]}),e.jsxs(i,{gutter:16,children:[e.jsx(t,{span:12,children:e.jsx(s.Item,{label:"State",name:"state",rules:[{required:!0}],children:e.jsx(a,{placeholder:"Enter State"})})}),e.jsx(t,{span:12,children:e.jsx(s.Item,{label:"Pincode",name:"pincode",rules:[{required:!0}],children:e.jsx(a,{})})})]}),e.jsx(s.Item,{label:"Booking Policy",name:"bookingPolicy",rules:[{required:!0}],children:e.jsx(a.TextArea,{rows:4})})]}),e.jsx(t,{span:12,children:e.jsxs("div",{className:"map-preview",children:[e.jsx("h4",{children:"Location"}),e.jsx("iframe",{title:"map",src:v,width:"100%",height:"220",style:{border:"1px solid #ccc",borderRadius:8},loading:"lazy"})]})})]}),e.jsx("div",{className:"form-actions",children:e.jsx(s.Item,{children:e.jsx(j,{type:"primary",htmlType:"submit",className:"update-btn",children:"UPDATE VENDOR"})})})]})]})}export{ne as default};
