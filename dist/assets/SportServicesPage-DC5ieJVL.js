import{a3 as E,r as u,j as o,B as g,a0 as F,m as A}from"./index-XzM8Cj3c.js";import{u as D}from"./UploadIcon-DVASWBXr.js";import{A as U,U as w,u as P}from"./useFetchSport-BHoIdjHF.js";import{u as N}from"./useMutation-CNNl5TnA.js";import{F as i}from"./index-BLf5ALDk.js";import{I as $}from"./index-Vt2X7eqz.js";import{U as L}from"./index-DpVHb5nB.js";import{R}from"./PlusOutlined-Dj0tFLrA.js";import{F as q}from"./Table-Dv9gfO7j.js";import{s as d}from"./index-Yvuj0Esb.js";import{P as m}from"./index-CXwmGbA0.js";import{C as x}from"./index-V8rTfzId.js";import"./useQuery-Beh9q-Hu.js";import"./useForm-EwlPOCpB.js";import"./row-CTTWbxgc.js";import"./index-BfZvbS5e.js";import"./ExclamationCircleFilled-D7dRXMD9.js";import"./Input-BUj1c9yh.js";import"./SearchOutlined-B0571LVy.js";import"./EyeOutlined-BVmecd_y.js";import"./fade-_qbex92f.js";import"./DeleteOutlined-Ke0rSpX_.js";import"./DownloadOutlined-D_mskBw8.js";import"./progress-DW_vC4dS.js";import"./addEventListener-kraIZfrw.js";import"./index-Ci-vNBFy.js";import"./index-BZS9dDwd.js";import"./useBubbleLock-B-1WFybW.js";import"./extendsObject-78o_rR5W.js";import"./InfoCircleFilled-Ce5_6Fhy.js";import"./ActionButton-DmSr_qh1.js";const Y=()=>{const r=E();return N({mutationFn:n=>U(n),onSuccess:()=>{r.invalidateQueries(["sportsList"]),console.log("Sport added successfully!")},onError:n=>{console.error("Failed to add sport:",n)}})},M=()=>N({mutationKey:["sportStatus"],mutationFn:r=>{if(!r)throw new Error("Payload is required to change status of sports");return w(r)},onSuccess:r=>{console.log("status change successfully",r)},onError:r=>{console.error("Error changing status",r)}}),je=()=>{const[r,n]=u.useState([]),[S]=i.useForm(),y=Y(),[j,C]=u.useState(""),[V,a]=u.useState(null),{data:c,isLoading:I}=P();u.useEffect(()=>{if(c&&c.result){const e=c.result.map((t,s)=>({key:t.id||s,name:t.sports_name||"N/A",icon:t.sports_images||"",sports:t.sports===1,coaching:t.coaching===1,popularSports:t.popular_sports===1,event:t.events===1}));n(e)}},[c]);const T=e=>{const t=new FormData;t.append("sportsName",e.name),t.append("sportsIcon",e.icon?.[0]?.originFileObj),y.mutate(t,{onSuccess:()=>{d.success("Sport/Service added successfully!"),C(`âœ… ${e.name} has been added successfully!`),S.resetFields(),setTimeout(()=>C(""),3e3)},onError:()=>{d.error("Failed to add sport/service")}})},{mutate:b}=M(),p=(e,t,s)=>{if(!r.find(h=>h.key===e))return;const k={id:e,[t]:s?1:0};console.log("payload of statua change",k),b(k,{onSuccess:()=>{n(h=>h.map(f=>f.key===e?{...f,[t]:s}:f)),d.success(`Sport ${t} status updated successfully.`),a(null)},onError:()=>{d.error(`Failed to update sport ${t} status.`),a(null)}})},l=(e,t,s)=>{a({key:e,field:t,newValue:!s})},v=[{title:"Name",dataIndex:"name"},{title:"Icon",dataIndex:"icon",render:e=>o.jsx("div",{className:"icon-cell",children:o.jsx("img",{src:e,alt:"icon",className:"sport-icon"})})},{title:"Sports",dataIndex:"sports",render:(e,t)=>o.jsx(m,{title:`Are you sure to ${e?"deactivate":"activate"} this sport?`,onConfirm:()=>p(t.key,"sports",!e),onCancel:()=>a(null),okText:"Yes",cancelText:"No",children:o.jsx(x,{checked:e,onClick:s=>{s.preventDefault(),l(t.key,"sports",e)}})})},{title:"Coaching",dataIndex:"coaching",render:(e,t)=>o.jsx(m,{title:`Are you sure to ${e?"deactivate":"activate"} this sport?`,onConfirm:()=>p(t.key,"coaching",!e),onCancel:()=>a(null),okText:"Yes",cancelText:"No",children:o.jsx(x,{checked:e,onClick:s=>{s.preventDefault(),l(t.key,"coaching",e)}})})},{title:"Popular sports",dataIndex:"popularSports",render:(e,t)=>o.jsx(m,{title:`Are you sure to ${e?"deactivate":"activate"} this sport?`,onConfirm:()=>p(t.key,"popularSports",!e),onCancel:()=>a(null),okText:"Yes",cancelText:"No",children:o.jsx(x,{checked:e,onClick:s=>{s.preventDefault(),l(t.key,"popularSports",e)}})})},{title:"Event",dataIndex:"event",render:(e,t)=>o.jsx(m,{title:`Are you sure to ${e?"deactivate":"activate"} this sport?`,onConfirm:()=>p(t.key,"event",!e),onCancel:()=>a(null),okText:"Yes",cancelText:"No",children:o.jsx(x,{checked:e,onClick:s=>{s.preventDefault(),l(t.key,"event",e)}})})},{title:"Action",render:()=>o.jsx(g,{type:"text",icon:o.jsx(A,{style:{color:"#1163C7"}})})}];return o.jsxs("div",{className:"sports-service-container",children:[o.jsx("div",{className:"",children:o.jsxs(i,{form:S,layout:"vertical",onFinish:T,className:"sports-form",children:[o.jsxs("div",{className:"input-wrapper",children:[o.jsx(i.Item,{name:"name",label:"Enter Sports Name",rules:[{required:!0,message:"Enter sport name"}],children:o.jsx($,{placeholder:"Enter Sport/Service Name*",className:"input-box"})}),o.jsx(i.Item,{name:"icon",valuePropName:"fileList",getValueFromEvent:e=>(e&&Array.isArray(e.fileList)||e)&&e.fileList,rules:[{required:!0,message:"Upload icon"}],label:"Upload Sport Icon",children:o.jsx(L,{listType:"text",maxCount:1,beforeUpload:()=>!1,children:o.jsxs(g,{className:"upload-box",children:[o.jsx("img",{src:D,alt:"upload"}),"Upload Icon"]})})})]}),o.jsx(i.Item,{className:"add-button-wrapper",children:o.jsx(g,{type:"primary",htmlType:"submit",icon:o.jsx(R,{}),className:"add-button",loading:y.isLoading,children:"ADD SPORT/SERVICE"})}),j&&o.jsx("div",{style:{marginTop:6,color:"#47e671",fontWeight:500},children:j})]})}),o.jsx(F,{spinning:I,size:"large",children:o.jsx(q,{columns:v,dataSource:r,className:"sports-table",pagination:{pageSize:10},rowKey:"key",scroll:{x:"max-content"}})})]})};export{je as default};
