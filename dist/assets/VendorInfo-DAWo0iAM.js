import{n as U,r as l,j as e,B as p}from"./index-XzM8Cj3c.js";/* empty css                   */import{u as f}from"./UploadIcon-DVASWBXr.js";import{u as q,a as E}from"./useUpdateVenue-Ccqx50_H.js";import{u as T}from"./useFetchAmenities-B1wmz0Bc.js";import{h as v}from"./moment-C5S46NFB.js";import{F as a}from"./index-BLf5ALDk.js";import{T as H}from"./index-DdiLVOL9.js";import{I as s}from"./index-Vt2X7eqz.js";import{U as I}from"./index-DpVHb5nB.js";import{R as b}from"./index-BZS9dDwd.js";import{S as F}from"./index-Ci-vNBFy.js";import"./useQuery-Beh9q-Hu.js";import"./endpointApi-CRaEXM59.js";import"./useMutation-CNNl5TnA.js";import"./useForm-EwlPOCpB.js";import"./row-CTTWbxgc.js";import"./index-BfZvbS5e.js";import"./ExclamationCircleFilled-D7dRXMD9.js";import"./index-B_VpdSuJ.js";import"./SearchOutlined-B0571LVy.js";import"./Input-BUj1c9yh.js";import"./EyeOutlined-BVmecd_y.js";import"./fade-_qbex92f.js";import"./DeleteOutlined-Ke0rSpX_.js";import"./DownloadOutlined-D_mskBw8.js";import"./progress-DW_vC4dS.js";import"./useBubbleLock-B-1WFybW.js";const{TextArea:y}=s,{Option:be}=F;function he(){const{id:m}=U(),[o]=a.useForm(),{RangePicker:N}=H,[V,n]=l.useState(!1),[h,w]=l.useState({latitude:18.5204,longitude:73.8567}),[d,g]=l.useState([]),[c,x]=l.useState([]),{data:r}=q({venueId:m}),{data:_,isloading:k}=T(),j=E(),C=_?.result||[];l.useEffect(()=>{if(r&&r.result){const i=r.result[0],t=i.amenities?i.amenities.map(u=>u.amenties_id):[];o.setFieldsValue({venueName:i.venue_name||"",venueId:i.id||"",about:i.about_venue||"",timing:i.start_time&&i.end_time?[v(i.start_time,"HH:mm:ss"),v(i.end_time,"HH:mm:ss")]:null,isBookable:i.isBookable===1?"yes":"no",amenities:t,lat:i.latitude||"",lng:i.longitude||"",fullAddress:i.full_address||"",area:i.area||"",city:i.city||"",state:i.state||"",pincode:i.pincode||"",bookingPolicy:i.booking_policy?i.booking_policy.replace(/\\n/g,`
`):""}),g(i.cover_image_mobile?[{uid:"-1",name:"mobile_cover.jpg",status:"done",url:i.cover_image_mobile}]:[]),x(i.cover_image?[{uid:"-2",name:"web_cover.jpg",status:"done",url:i.cover_image}]:[])}},[r,o]);const S=({fileList:i})=>g(i),A=({fileList:i})=>x(i);l.useEffect(()=>{const i=o.getFieldValue("lat"),t=o.getFieldValue("lng");i&&t&&w({latitude:i,longitude:t})},[o.getFieldValue("lat"),o.getFieldValue("lng")]);const L=`https://maps.google.com/maps?q=${h.latitude},${h.longitude}&z=15&output=embed`,B=i=>{n(!0);const t=new FormData;t.append("venueId",m),t.append("venueName",i.venueName),t.append("about_venue",i.about),t.append("startTime",i.timing?i.timing[0].format("HH:mm:ss"):""),t.append("endTime",i.timing?i.timing[1].format("HH:mm:ss"):""),t.append("bookingPolicy",i.bookingPolicy),d[0]?.originFileObj&&t.append("mobileCoverImage",d[0].originFileObj),c[0]?.originFileObj&&t.append("desktopCoverImage",c[0].originFileObj);const u={venueId:m,isBookable:i.isBookable==="yes"?1:0,amenitiesIds:i.amenities||[]};j.mutate(t,{onSuccess:P=>{P.status===200&&j.mutate(u,{onSuccess:()=>{n(!1),console.log("Venue details updated successfully")},onError:()=>{console.error("Failed to update venue details"),n(!1)}})},onError:()=>{console.error("Failed to update venue details"),n(!1)}})};return e.jsx("div",{className:"venue-info-container",children:e.jsxs(a,{form:o,layout:"vertical",onFinish:B,children:[e.jsx("div",{className:"section-title",children:"Venue Information"}),e.jsxs("div",{className:"Venue-form-row",children:[e.jsx(a.Item,{name:"venueName",label:"Venue Name",rules:[{required:!0}],children:e.jsx(s,{placeholder:"Enter venue name",disabled:!0})}),e.jsx(a.Item,{name:"venueId",label:"Venue ID",initialValue:"#123456",children:e.jsx(s,{disabled:!0})})]}),e.jsxs("div",{className:"Venue-form-row",children:[e.jsx(a.Item,{label:"Upload Cover Image For Mobile App",children:e.jsx(I,{accept:"image/*",beforeUpload:()=>!1,maxCount:1,listType:"text",fileList:d,onChange:S,children:e.jsxs(p,{className:"uploadImg",children:[e.jsx("img",{src:f,alt:"upload"}),"Upload Cover Image"]})})}),e.jsx(a.Item,{label:"Upload Cover Image For Website",children:e.jsx(I,{accept:"image/*",beforeUpload:()=>!1,maxCount:1,listType:"text",fileList:c,onChange:A,children:e.jsxs(p,{className:"uploadImg",children:[e.jsx("img",{src:f,alt:"upload"})," Upload Cover Image"]})})})]}),e.jsx(a.Item,{name:"about",label:"Add About Venue",rules:[{required:!0}],children:e.jsx(y,{rows:5,placeholder:`Eg:Football:- It is recommended but not compulsory to wear football studs while playing at the facility.
- Metal studs are not allowed.
Box Cricket:
- Stumps and Bats will be provided by the venue.
- Users have to bring their own Cricket Balls.`})}),e.jsxs("div",{className:"Venue-form-row",children:[e.jsx(a.Item,{name:"timing",label:"Timing",rules:[{required:!0}],children:e.jsx(N,{format:"hh:mm A",use12Hours:!0})}),e.jsx(a.Item,{name:"isBookable",label:"Is Bookable?",children:e.jsxs(b.Group,{children:[e.jsx(b,{value:"yes",className:"radio-btn",children:"Yes"}),e.jsx(b,{value:"no",className:"radio-btn",children:"No"})]})}),e.jsx(a.Item,{name:"amenities",label:"Amenities",rules:[{required:!0,message:"Please select at least one amenity"}],children:e.jsx(F,{mode:"multiple",showSearch:!0,placeholder:"Select amenities",optionFilterProp:"label",loading:k,allowClear:!0,options:C.map(i=>({label:i.amenities_name,value:i.id})),onChange:i=>{o.setFieldsValue({amenities:i})},filterOption:(i,t)=>t.label.toLowerCase().includes(i.toLowerCase())})})]}),e.jsx("div",{className:"section-title",children:"Location Info"}),e.jsxs("div",{className:"location-container",children:[e.jsxs("div",{className:"location-form",children:[e.jsx("div",{className:"Venue-form-row",children:e.jsx(a.Item,{name:"fullAddress",label:"Enter Full Address",rules:[{required:!0}],children:e.jsx(s,{disabled:!0})})}),e.jsxs("div",{className:"Venue-form-row",children:[e.jsx(a.Item,{name:"area",label:"Area",rules:[{required:!0}],children:e.jsx(s,{disabled:!0})}),e.jsx(a.Item,{name:"city",label:"City",rules:[{required:!0}],children:e.jsx(s,{disabled:!0})})]}),e.jsxs("div",{className:"Venue-form-row",children:[e.jsx(a.Item,{name:"state",label:"State",rules:[{required:!0}],children:e.jsx(s,{disabled:!0})}),e.jsx(a.Item,{name:"pincode",label:"Pincode",rules:[{required:!0}],children:e.jsx(s,{disabled:!0})})]}),e.jsx(a.Item,{name:"bookingPolicy",label:"Booking Policy",children:e.jsx(y,{rows:3})})]}),e.jsxs("div",{className:"map-side",children:[e.jsx("div",{className:"Venue-form-row",children:e.jsx(a.Item,{label:"Search for a location",children:e.jsx(s,{placeholder:"Search location"})})}),e.jsxs("div",{className:"map-container",children:[e.jsx("p",{className:"map-label",children:"Location"}),e.jsx("iframe",{title:"map",src:L,width:"100%",height:"220",style:{border:"1px solid #ccc",borderRadius:8},loading:"lazy"})]})]})]}),e.jsx(a.Item,{className:"centered-submit",children:e.jsx(p,{type:"primary",htmlType:"submit",loading:V,children:"UPDATE"})})]})})}export{he as default};
