import{n as P,a as A,r as g,j as e,B as b}from"./index-XzM8Cj3c.js";/* empty css                 */import{u as q,a as R}from"./useUpdateVenue-Ccqx50_H.js";import{G as w}from"./GooglePlacesAutocomplete-BY2BgwQL.js";import{F as t}from"./index-BLf5ALDk.js";import{R as o,C as a}from"./row-CTTWbxgc.js";import{I as n}from"./index-Vt2X7eqz.js";import{R as C}from"./DeleteOutlined-Ke0rSpX_.js";import{s as f}from"./index-Yvuj0Esb.js";import{S as L}from"./index-Ci-vNBFy.js";import"./useQuery-Beh9q-Hu.js";import"./endpointApi-CRaEXM59.js";import"./useMutation-CNNl5TnA.js";import"./useForm-EwlPOCpB.js";import"./ExclamationCircleFilled-D7dRXMD9.js";import"./index-BfZvbS5e.js";import"./Input-BUj1c9yh.js";import"./SearchOutlined-B0571LVy.js";import"./EyeOutlined-BVmecd_y.js";import"./InfoCircleFilled-Ce5_6Fhy.js";const{Option:ne}=L;function k({form:l,onPlaceSelect:d}){const m=l.getFieldValue("search")||"",i=c=>{l.setFieldsValue({search:c.target.value})};return e.jsxs(e.Fragment,{children:[e.jsx(t.Item,{name:"search",label:"Location",children:e.jsx(w,{onPlaceSelect:d,placeholder:"Search your address",value:m,onChange:i,border:!0})}),e.jsx(t.Item,{name:"latitude",hidden:!0,children:e.jsx(n,{})}),e.jsx(t.Item,{name:"longitude",hidden:!0,children:e.jsx(n,{})})]})}function ie(){const{id:l}=P(),d=Number(l),m=A(),[i]=t.useForm(),[c,j]=g.useState({latitude:18.5204,longitude:73.8567}),{data:y,isLoading:U,error:_}=q({venueId:d}),r=y?.result[0];g.useEffect(()=>{r&&(i.setFieldsValue({vendorName:r.owner_name,vendorId:r.vendor_id,venueName:r.venue_name,address:r.full_address,area:r.area,city:r.city,state:r.state,pincode:r.pincode,bookingPolicy:r.booking_policy,latitude:r.latitude,longitude:r.longitude}),r.latitude&&r.longitude&&j({latitude:r.latitude,longitude:r.longitude}))},[r,i]);const I=({address:s,area:u,city:p,state:V,pincode:F,latitude:h,longitude:x,search:S})=>{i.setFieldsValue({address:s,area:u,city:p,state:V,pincode:F,latitude:h,longitude:x,search:S}),h&&x&&j({latitude:h,longitude:x})},v=`https://maps.google.com/maps?q=${c.latitude},${c.longitude}&z=15&output=embed`,{mutate:N,isloading:D}=R(),E=s=>{console.log("Form values:",s);const u={venueName:s.venueName,lat:s.latitude,lng:s.longitude,fullAddress:s.address,area:s.area,city:s.city,state:s.state,pincode:Number(s.pincode),venueId:d,bookingPolicy:s.bookingPolicy};N(u,{onSuccess:()=>{f.success("Venue created successfully"),i.resetFields(),m("/admin/venues")},onError:p=>{f.error(p?.response?.data?.message||"Failed to create venue")}})};return e.jsxs(t,{form:i,layout:"vertical",onFinish:E,children:[e.jsx("div",{className:"venue-form",children:e.jsxs(o,{gutter:16,children:[e.jsx(a,{span:12,children:e.jsx(t.Item,{label:"Enter Vendor Name",name:"vendorName",children:e.jsx(n,{disabled:!0})})}),e.jsx(a,{span:12,children:e.jsx(t.Item,{label:"Enter Vendor ID",name:"vendorId",children:e.jsx(n,{disabled:!0})})})]})}),e.jsxs("div",{className:"venue-form",children:[e.jsxs(o,{gutter:[16,16],align:"bottom",children:[e.jsx(a,{span:12,children:e.jsx(t.Item,{label:"Enter Venue Name",name:"venueName",rules:[{required:!0}],children:e.jsx(n,{})})}),e.jsx(a,{span:12,children:e.jsx(t.Item,{className:"remove-btn-wrapper",children:e.jsx(b,{type:"primary",className:"remove-btn",icon:e.jsx(C,{}),children:"REMOVE VENUES"})})})]}),e.jsx("h3",{className:"section-title",children:"Location Info"}),e.jsxs(o,{gutter:16,children:[e.jsx(a,{span:12,children:e.jsx(t.Item,{name:"address",rules:[{required:!0}],label:"Enter Full Address*",children:e.jsx(n.TextArea,{placeholder:"Address, Street, etc.",allowClear:!0})})}),e.jsx(a,{span:12,children:e.jsx(k,{form:i,onPlaceSelect:I})})]}),e.jsxs(o,{gutter:16,children:[e.jsxs(a,{span:12,children:[e.jsxs(o,{gutter:16,children:[e.jsx(a,{span:12,children:e.jsx(t.Item,{label:"Area",name:"area",rules:[{required:!0}],children:e.jsx(n,{placeholder:"Enter Area"})})}),e.jsx(a,{span:12,children:e.jsx(t.Item,{label:"City",name:"city",rules:[{required:!0}],children:e.jsx(n,{placeholder:"Enter City"})})})]}),e.jsxs(o,{gutter:16,children:[e.jsx(a,{span:12,children:e.jsx(t.Item,{label:"State",name:"state",rules:[{required:!0}],children:e.jsx(n,{placeholder:"Enter State"})})}),e.jsx(a,{span:12,children:e.jsx(t.Item,{label:"Pincode",name:"pincode",rules:[{required:!0}],children:e.jsx(n,{})})})]}),e.jsx(t.Item,{label:"Booking Policy",name:"bookingPolicy",rules:[{required:!0}],children:e.jsx(n.TextArea,{rows:4})})]}),e.jsx(a,{span:12,children:e.jsxs("div",{className:"map-preview",children:[e.jsx("h4",{children:"Location"}),e.jsx("iframe",{title:"map",src:v,width:"100%",height:"220",style:{border:"1px solid #ccc",borderRadius:8},loading:"lazy"})]})})]}),e.jsx("div",{className:"form-actions",children:e.jsx(t.Item,{children:e.jsx(b,{type:"primary",htmlType:"submit",className:"update-btn",children:"UPDATE VENDOR"})})})]})]})}export{ie as default};
