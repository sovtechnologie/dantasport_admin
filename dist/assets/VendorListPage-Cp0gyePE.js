import{a3 as A,r as p,a as I,j as t,a0 as N,B as c,m as k}from"./index-XzM8Cj3c.js";import{u as L}from"./useQuery-Beh9q-Hu.js";import{f as S,V}from"./endpointApi-CicnUymp.js";import{u as C}from"./useMutation-CNNl5TnA.js";import{I as b}from"./index-Vt2X7eqz.js";import{a as E}from"./SearchOutlined-B0571LVy.js";import{R as F}from"./PlusOutlined-Dj0tFLrA.js";import{F as $}from"./Table-Dv9gfO7j.js";import{S as u}from"./index-Ci-vNBFy.js";import"./Input-BUj1c9yh.js";import"./EyeOutlined-BVmecd_y.js";import"./addEventListener-kraIZfrw.js";import"./index-V8rTfzId.js";import"./useBubbleLock-B-1WFybW.js";import"./index-BZS9dDwd.js";import"./useForm-EwlPOCpB.js";import"./extendsObject-78o_rR5W.js";const R=()=>L({queryKey:["VendorList"],queryFn:()=>S()}),_=()=>{const d=A();return C({mutationFn:V,onSuccess:r=>{console.log("✅ Status updated:",r),d.invalidateQueries(["vendorList"])},onError:r=>{console.error("❌ Failed to update status:",r)}})},{Option:l}=u;function Y(){const[d,r]=p.useState([]),m=I(),{data:o,isloading:v,error:x}=R(),{mutate:h,isloading:y}=_();p.useEffect(()=>{if(o&&o.result){const i=o.result.map((e,s)=>({key:e.id||s,id:e.id,name:e.full_name||"N/A",vendorId:e.id||"N/A",services:Array.isArray(e.services)&&e.services.length>0?e.services.join(","):"N/A",venuesCount:e.venue_count||0,venueLocation:e.cities||"N/A",credentials:{username:e.mobile_number||"N/A",password:e.nakedPassword||"N/A"},status:e.status===1?"Active":"Inactive"}));r(i)}},[o]);const f=(i,e,s)=>{r(a=>a.map(n=>n.key===i?{...n,status:s}:n)),h({vendorId:e,status:s==="Active"?1:0},{onSuccess:()=>{message.success("Vendor status updated successfully")},onError:()=>{message.error("Failed to update vendor status"),r(a=>a.map(n=>n.key===i?{...n,status:s==="Active"?"Inactive":"Active"}:n))}})},g=[{title:"Vendor ID",dataIndex:"vendorId",key:"vendorId"},{title:"Vendor Name",dataIndex:"name",key:"name"},{title:"Services",dataIndex:"services",key:"services"},{title:"VenuesCount",dataIndex:"venuesCount",key:"venuesCount"},{title:"Venue Location",dataIndex:"venueLocation",key:"venueLocation",render:(i,e)=>{const s=e.venueLocation&&e.venueLocation!=="N/A"?e.venueLocation.split(",").map(a=>a.trim()):[];return t.jsx(u,{style:{width:150},placeholder:"Venue location",defaultValue:s.length>0?s[0]:void 0,children:s.map((a,n)=>t.jsx(l,{value:a,children:a},`${a}-${n}`))})}},{title:"login credentials",dataIndex:"credentials",key:"credentials",render:(i,e)=>t.jsxs("div",{children:[t.jsx("div",{children:`Username  :${e.credentials.username}`}),t.jsx("div",{children:`Password  :${e.credentials.password}`})]})},{title:"Status",dataIndex:"status",key:"status",render:(i,e)=>t.jsxs(u,{value:e.status,onChange:s=>f(e.key,e.id,s),className:`status-select ${e.status==="Active"?"status-active":"status-inactive"}`,loading:y,children:[t.jsx(l,{value:"Active",children:"Active"}),t.jsx(l,{value:"Inactive",children:"Inactive"})]})},{title:"Action",key:"action",render:(i,e)=>t.jsx(c,{type:"text",icon:t.jsx(k,{style:{color:"#1163C7"}}),className:"action-readonly-button",onClick:()=>m(`/admin/vendors/edit-vendor/${e.id}`)})}],j=()=>{m("/admin/vendors/add-vendor")};return v?t.jsx(N,{size:"large",style:{display:"block",margin:"50px auto"}}):x?t.jsx("p",{children:"Error fetching vendor list!"}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"search-container",children:[t.jsx("div",{className:"filter-box",children:t.jsx("div",{className:"filter-item",children:t.jsx(b,{placeholder:"Search by Anything",prefix:t.jsx(E,{}),className:"search-input"})})}),t.jsx(c,{type:"primary",className:"search-button",children:"SEARCH"})]}),t.jsxs("div",{className:"vendor-page-container",children:[t.jsx("div",{className:"vendor-header-form",children:t.jsx(c,{type:"primary",icon:t.jsx(F,{}),className:"add-vendor-button",onClick:j,children:"Add Vendor"})}),t.jsx($,{columns:g,dataSource:d,pagination:{pageSize:10},className:"vendor-table",rowKey:"key",scroll:{x:!0}})]})]})}export{Y as default};
