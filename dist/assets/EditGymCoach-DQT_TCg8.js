import{a as b,d as T,r as i,j as e,B as x}from"./index-XzM8Cj3c.js";/* empty css                  */import{i as F}from"./endpointApi-DBrVeqMh.js";import{F as l}from"./index-BLf5ALDk.js";import{s as d}from"./index-Yvuj0Esb.js";import{R as S}from"./ArrowLeftOutlined-DMqiT_4K.js";import{I as D}from"./index-Vt2X7eqz.js";import{S as y}from"./index-Ci-vNBFy.js";import{U as P}from"./index-DpVHb5nB.js";import{R as E}from"./PlusOutlined-Dj0tFLrA.js";import"./useForm-EwlPOCpB.js";import"./row-CTTWbxgc.js";import"./index-BfZvbS5e.js";import"./ExclamationCircleFilled-D7dRXMD9.js";import"./InfoCircleFilled-Ce5_6Fhy.js";import"./SearchOutlined-B0571LVy.js";import"./Input-BUj1c9yh.js";import"./EyeOutlined-BVmecd_y.js";import"./fade-_qbex92f.js";import"./DeleteOutlined-Ke0rSpX_.js";import"./DownloadOutlined-D_mskBw8.js";import"./progress-DW_vC4dS.js";const{Option:n}=y;function X(){const[t]=l.useForm(),p=b(),m=T(),[c,u]=i.useState([]),[g,f]=i.useState(!1),[o,j]=i.useState(null),r=m.state?.coachId||new URLSearchParams(m.search).get("id");i.useEffect(()=>{o&&(t.setFieldsValue({coacheName:o.coaches_name,coacheType:o.coaches_type}),o.coaches_image&&o.coaches_image!=="coachimage"?u([{uid:"-1",name:"current-coach.jpg",status:"done",url:o.coaches_image}]):u([]))},[o,t]),i.useEffect(()=>{m.state?.coachData?j(m.state.coachData):r&&j({id:r,coaches_name:"John Doe",coaches_type:"HEAD",coaches_image:"https://example.com/coach.jpg",status:1,created_at:"2025-01-01T00:00:00.000Z"})},[m.state,r]);const v=i.useCallback(async a=>{try{f(!0),console.log("Form Values:",a);const s=new FormData;s.append("coachesId",r),s.append("coacheName",a.coacheName),s.append("coacheType",a.coacheType),c.length>0&&c[0].originFileObj&&s.append("image",c[0].originFileObj,c[0].name),console.log("FormData payload:",{coachesId:r,coacheName:a.coacheName,coacheType:a.coacheType,image:c.length>0?c[0].name:"No file"});const h=await F(s);console.log("API Response:",h),h.status===200||h.status===201?(d.success("Gym coach updated successfully!"),t.resetFields(),u([]),p("/vendor/gym/coaches")):d.error(h.message||"Failed to update gym coach")}catch(s){console.error("Error updating gym coach:",s),d.error(s.response?.data?.message||"Failed to update gym coach. Please try again.")}finally{f(!1)}},[r,c,p]),C=i.useCallback(({fileList:a})=>{u(a),a.length>0&&a[0].originFileObj?t.setFieldValue("coacheImage",a[0].originFileObj):t.setFieldValue("coacheImage",void 0),t.validateFields(["coacheImage"]).catch(()=>{})},[t]),I=a=>a.type.startsWith("image/")?(a.size/1024/1024<10||d.error("Image must be smaller than 10MB!"),!1):(d.error("You can only upload image files!"),!1),N=()=>{p("/vendor/gym/coaches")};return o?e.jsxs("div",{className:"add-member-container",children:[e.jsx("div",{style:{marginBottom:"20px"},children:e.jsx(x,{type:"text",icon:e.jsx(S,{}),onClick:N,style:{color:"#1163C7",fontSize:"16px",padding:"4px 8px",height:"auto"},children:"Back to Coaches"})}),e.jsxs(l,{layout:"vertical",onFinish:v,form:t,initialValues:{coacheName:o.coaches_name,coacheType:o.coaches_type},children:[e.jsxs("h2",{className:"member-title",children:["EDIT GYM COACH ",o?.id&&`#${o.id}`]}),e.jsxs("div",{className:"member-form-row",children:[e.jsx(l.Item,{name:"coacheName",label:"Enter Coach Name",rules:[{required:!0,message:"Please enter coach name"}],children:e.jsx(D,{placeholder:"Enter coach full name"})}),e.jsx(l.Item,{name:"coacheType",label:"Select Coach Type",rules:[{required:!0,message:"Please select coach type"}],children:e.jsxs(y,{placeholder:"Select Coach Type",className:"member-Select",children:[e.jsx(n,{value:"HEAD",children:"Head Trainer"}),e.jsx(n,{value:"PERSONAL",children:"Personal Trainer"}),e.jsx(n,{value:"YOGA",children:"Yoga Instructor"}),e.jsx(n,{value:"FITNESS",children:"Fitness Instructor"}),e.jsx(n,{value:"CARDIO",children:"Cardio Specialist"}),e.jsx(n,{value:"STRENGTH",children:"Strength Trainer"})]})})]}),e.jsx("div",{className:"member-form-row",children:e.jsx(l.Item,{label:"Upload Coach Photo",name:"coacheImage",rules:[{required:!1,message:"Please upload coach photo",validator:(a,s)=>(c.length>0&&c[0].originFileObj,Promise.resolve())}],children:e.jsxs("div",{children:[e.jsx(P,{listType:"picture-card",fileList:c,onChange:C,beforeUpload:I,maxCount:1,accept:"image/*",children:c.length>=1?null:e.jsxs("div",{children:[e.jsx(E,{}),e.jsx("div",{style:{marginTop:8},children:"Upload Photo"})]})}),e.jsxs("div",{className:"upload-hint",children:[e.jsx("p",{children:"• Upload a clear photo of the coach"}),e.jsx("p",{children:"• Supported formats: JPG, PNG, GIF"}),e.jsx("p",{children:"• Maximum file size: 10MB"}),e.jsx("p",{children:"• Leave empty to keep current photo"})]})]})})}),e.jsx(l.Item,{className:"centered-submit",children:e.jsx(x,{type:"primary",htmlType:"submit",loading:g,disabled:g,children:g?"UPDATING COACH...":"UPDATE GYM COACH"})})]})]}):e.jsx("div",{className:"add-member-container",children:e.jsxs("div",{style:{textAlign:"center",padding:"50px"},children:[e.jsx("div",{style:{marginBottom:"20px"},children:r?"Loading coach data...":"No coach data available"}),!r&&e.jsx(x,{type:"primary",onClick:()=>p("/vendor/gym/coaches"),children:"Back to Coaches List"})]})})}export{X as default};
