import{a3 as I,r as d,a as g,j as t,a0 as j,B as o,m as A}from"./index-XzM8Cj3c.js";import{u as S}from"./useQuery-Beh9q-Hu.js";import{a as V,U as k}from"./endpointApi-CRaEXM59.js";import{u as b}from"./useMutation-CNNl5TnA.js";import{I as C}from"./index-Vt2X7eqz.js";import{a as E}from"./SearchOutlined-B0571LVy.js";import{R as F}from"./PlusOutlined-Dj0tFLrA.js";import{F as L}from"./Table-Dv9gfO7j.js";import{S as p}from"./index-Ci-vNBFy.js";import{s as l}from"./index-Yvuj0Esb.js";import"./Input-BUj1c9yh.js";import"./EyeOutlined-BVmecd_y.js";import"./addEventListener-kraIZfrw.js";import"./index-V8rTfzId.js";import"./useBubbleLock-B-1WFybW.js";import"./index-BZS9dDwd.js";import"./useForm-EwlPOCpB.js";import"./extendsObject-78o_rR5W.js";import"./ExclamationCircleFilled-D7dRXMD9.js";import"./InfoCircleFilled-Ce5_6Fhy.js";const _=()=>S({queryKey:["VenueList"],queryFn:()=>V()}),$=()=>{const i=I();return b({mutationKey:["VenueStatusChange"],mutationFn:a=>{if(!a)throw new Error("Payload is required to update status a venue");return k(a)},onSuccess:a=>{console.log("Venue update status changed successfully",a),i.invalidateQueries(["VenueList"])},onError:a=>{console.error("Error changing venue status",a)}})},{Option:m}=p;function te(){const[i,a]=d.useState([]),c=g(),{data:r,isLoading:v,error:y}=_(),{mutate:h,isloading:R}=$();d.useEffect(()=>{if(r&&r.result){const s=r.result.map((e,n)=>({key:e.id||n,vendorId:e.vendor_id||"N/A",venueId:e.id,name:e.full_name||"N/A",mobileNumber:e.mobile_number||"N/A",venueName:e.venue_name||"N/A",area:e.area||"N/A",city:e.city||"N/A",state:e.state||"N/A",fullAddress:e.full_address||"N/A",status:e.status===1?"Active":"Inactive"}));a(s)}},[r]);const x=(s,e)=>{h({venueId:s.venueId,status:e==="Active"?1:0},{onSuccess:()=>{l.success("Venue status updated successfully"),a(n=>n.map(u=>u.key===s.key?{...u,status:e}:u))},onError:()=>{l.error("Failed to update venue status")}})},f=[{title:"Vendor ID",dataIndex:"vendorId",key:"vendorId"},{title:"Vendor Name",dataIndex:"name",key:"name"},{title:"VenueId",dataIndex:"venueId",key:"venueId"},{title:"Venue Name",dataIndex:"venueName",key:"venueName"},{title:"Location",key:"location",render:(s,e)=>`${e.area},${e.city}, ${e.state}`},{title:"Status",dataIndex:"status",key:"status",render:(s,e)=>t.jsxs(p,{value:s,onChange:n=>x(e,n),className:`status-select ${s==="Active"?"status-active":"status-inactive"}`,style:{width:100},children:[t.jsx(m,{value:"Active",children:"Active"}),t.jsx(m,{value:"Inactive",children:"Inactive"})]})},{title:"Action",key:"action",render:(s,e)=>t.jsx(o,{type:"text",icon:t.jsx(A,{style:{color:"#1163C7"}}),onClick:()=>c(`/admin/venues/edit-venue/${e.venueId}`)})}],N=()=>{c("/admin/venues/add-venue")};return y?t.jsx("div",{className:"error",children:"Error loading venues"}):t.jsx(t.Fragment,{children:t.jsxs(j,{spinning:v,size:"large",children:[t.jsxs("div",{className:"search-container",children:[t.jsx("div",{className:"filter-box",children:t.jsx("div",{className:"filter-item",children:t.jsx(C,{placeholder:"Search by Anything",prefix:t.jsx(E,{}),className:"search-input"})})}),t.jsx(o,{type:"primary",className:"search-button",children:"SEARCH"})]}),t.jsxs("div",{className:"venue-page-container",children:[t.jsx("div",{className:"venue-header-form",children:t.jsx(o,{type:"primary",icon:t.jsx(F,{}),className:"add-venue-button",onClick:N,children:"Add Venue"})}),t.jsx(L,{columns:f,dataSource:i,pagination:{pageSize:10},className:"venue-table",rowKey:"key",scroll:{x:!0}})]})]})})}export{te as default};
