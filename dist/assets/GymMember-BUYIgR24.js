import{a3 as Z,r as n,j as e,B as N,R,a as _e,b as De,a0 as ue,A as pe,T as E,a4 as Fe,S as ke,a2 as V,m as ze,a5 as Ge,a6 as Ee}from"./index-XzM8Cj3c.js";/* empty css               */import{a as Re}from"./useFetchvendorVenues-D949lnpY.js";import{u as Ae}from"./useQuery-Beh9q-Hu.js";import{g as Te,d as Le,a as Ue,u as Be,b as qe,c as $e,e as Oe}from"./endpointApi-DBrVeqMh.js";import{u as ee}from"./useMutation-CNNl5TnA.js";import{s as u}from"./index-Yvuj0Esb.js";import{u as Ve,R as ge,a as he,P as We}from"./PermissionTreeView-CyYyqLcV.js";import{F as h}from"./index-BLf5ALDk.js";import{M as se}from"./index-BTmfCYkW.js";import{I}from"./index-Vt2X7eqz.js";import{S as _}from"./index-Ci-vNBFy.js";import{U as be}from"./index-DpVHb5nB.js";import{R as fe}from"./PlusOutlined-Dj0tFLrA.js";import{F as Ke,P as Qe}from"./Table-Dv9gfO7j.js";import{B as Je}from"./index-D8JKXGq0.js";import{T as Ye}from"./index-B9zQjaED.js";import{R as X}from"./EyeOutlined-BVmecd_y.js";import{R as He}from"./DeleteOutlined-Ke0rSpX_.js";import{I as Xe}from"./index-CthMyroC.js";import"./ExclamationCircleFilled-D7dRXMD9.js";import"./InfoCircleFilled-Ce5_6Fhy.js";import"./SearchOutlined-B0571LVy.js";import"./ReloadOutlined-2S6DfmwU.js";import"./index-BZS9dDwd.js";import"./useBubbleLock-B-1WFybW.js";import"./useForm-EwlPOCpB.js";import"./row-CTTWbxgc.js";import"./index-BfZvbS5e.js";import"./ActionButton-DmSr_qh1.js";import"./useClosable-B4NhgZhJ.js";import"./extendsObject-78o_rR5W.js";import"./Skeleton-BxJpOdZN.js";import"./fade-_qbex92f.js";import"./Input-BUj1c9yh.js";import"./DownloadOutlined-D_mskBw8.js";import"./progress-DW_vC4dS.js";import"./addEventListener-kraIZfrw.js";import"./index-V8rTfzId.js";const Ze=({gymId:d,vendorId:a})=>Ae({queryKey:["gymMembers",d,a],queryFn:async()=>{try{if(!d||!a)return console.log("âš ï¸ Missing gymId or vendorId, skipping fetch"),{result:[]};console.log("ðŸ“¤ Fetching gym members for:",{gymId:d,vendorId:a});const o={venueId:parseInt(d),vendorId:parseInt(a)},t=await Te(o);if(console.log("âœ… Fetch gym members response:",t),t?.status===200)return t;throw new Error(t?.message||"Failed to fetch gym members")}catch(o){throw console.error("âŒ Fetch gym members error:",o),o}},enabled:!!d&&!!a,staleTime:5*60*1e3,cacheTime:10*60*1e3,retry:2,retryDelay:1e3}),es=(d,a)=>{const o=Z();return ee({mutationFn:async t=>{try{console.log("ðŸ“¤ Deleting gym member with payload:",t);const i=await Le(t);if(console.log("âœ… Delete gym member response:",i),i?.status===200)return i;throw new Error(i?.message||"Failed to delete gym member")}catch(i){throw console.error("âŒ Delete gym member error:",i),i}},onSuccess:(t,i)=>{console.log("ðŸŽ‰ Gym member deleted successfully:",t),u.success("Gym member deleted successfully!"),d&&a&&o.invalidateQueries({queryKey:["gymMembers",d,a]}),o.invalidateQueries({queryKey:["gymMembers"]})},onError:t=>{console.error("âŒ Delete gym member failed:",t);const i=t?.response?.data?.message||t?.message||"Failed to delete gym member";u.error(i)}})},ss=(d,a)=>{const o=Z();return ee({mutationFn:async t=>{try{console.log("ðŸ“¤ Adding gym member with formData:",t);const i=await Ue(t);if(console.log("âœ… Add gym member response:",i),i?.status===200||i?.status===201)return i;throw new Error(i?.message||"Failed to add gym member")}catch(i){throw console.error("âŒ Add gym member error:",i),i}},onSuccess:(t,i)=>{console.log("ðŸŽ‰ Gym member added successfully:",t),u.success("Gym member added successfully!"),o.invalidateQueries({queryKey:["gymMembers"]})},onError:t=>{console.error("âŒ Add gym member failed:",t);const i=t?.response?.data?.message||t?.message||"Failed to add gym member";u.error(i)}})},{Option:q}=_,rs=({isVisible:d,onClose:a,selectedGymId:o})=>{const[t]=h.useForm(),[i,x]=n.useState(!1),[b,y]=n.useState([]),f=ss(),w=({fileList:p})=>{y(p),p.length>0&&p[0].originFileObj?t.setFieldValue("memberDoc",p[0].originFileObj):t.setFieldValue("memberDoc",void 0),t.validateFields(["memberDoc"]).catch(()=>{})},D=p=>p.type.startsWith("image/")?(p.size/1024/1024<10||u.error("Image must be smaller than 10MB!"),!1):(u.error("You can only upload image files!"),!1),A=n.useCallback(async p=>{if(!o){u.error("Please select a gym first");return}try{x(!0);const m=new FormData;m.append("venueId",String(o)),m.append("fullName",p.fullName),m.append("mobileNumber",p.mobileNumber),m.append("password",p.password),m.append("document",p.document),m.append("documentNumber",p.documentNumber),m.append("type","3"),b.length>0&&b[0].originFileObj&&m.append("memberDoc",b[0].originFileObj,b[0].name),console.log("ðŸ“¤ Submitting gym member data (venueId=gymId, type=3):");for(let[g,T]of m.entries())console.log(`  ${g}:`,T);await f.mutateAsync(m),t.resetFields(),y([]),a()}catch(m){console.error("âŒ Add gym member error:",m)}finally{x(!1)}},[o,f,t,b,a]),P=()=>{t.resetFields(),y([]),a()};return e.jsx(se,{title:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(R,{style:{color:"#1163C7"}}),"Add Gym Member"]}),open:d,onCancel:P,footer:null,width:600,centered:!0,destroyOnClose:!0,children:e.jsxs(h,{form:t,layout:"vertical",onFinish:A,autoComplete:"off",className:"add-member-form",children:[e.jsxs("div",{className:"form-row",children:[e.jsx(h.Item,{name:"fullName",label:"Full Name",rules:[{required:!0,message:"Please enter full name"},{min:2,message:"Name must be at least 2 characters"},{max:50,message:"Name must not exceed 50 characters"}],className:"form-item-half",children:e.jsx(I,{placeholder:"Enter full name",size:"large"})}),e.jsx(h.Item,{name:"mobileNumber",label:"Mobile Number",rules:[{required:!0,message:"Please enter mobile number"},{pattern:/^[0-9]{10}$/,message:"Please enter a valid 10-digit mobile number"}],className:"form-item-half",children:e.jsx(I,{placeholder:"Enter mobile number",size:"large",maxLength:10})})]}),e.jsxs("div",{className:"form-row",children:[e.jsx(h.Item,{name:"password",label:"Password",rules:[{required:!0,message:"Please enter password"},{min:6,message:"Password must be at least 6 characters"}],className:"form-item-half",children:e.jsx(I.Password,{placeholder:"Enter password",size:"large"})}),e.jsx(h.Item,{name:"document",label:"Document Type",rules:[{required:!0,message:"Please select document type"}],className:"form-item-half",children:e.jsxs(_,{placeholder:"Select document type",size:"large",children:[e.jsx(q,{value:"Aadhar",children:"Aadhar Card"}),e.jsx(q,{value:"Pan",children:"PAN Card"}),e.jsx(q,{value:"Driving License",children:"Driving License"}),e.jsx(q,{value:"Passport",children:"Passport"}),e.jsx(q,{value:"Voter ID",children:"Voter ID"})]})})]}),e.jsx(h.Item,{name:"documentNumber",label:"Document Number",rules:[{required:!0,message:"Please enter document number"},{min:5,message:"Document number must be at least 5 characters"}],children:e.jsx(I,{placeholder:"Enter document number",size:"large"})}),e.jsxs(h.Item,{label:"Document Photo",name:"memberDoc",rules:[{required:!0,message:"Please upload document photo",validator:(p,m)=>b.length>0&&b[0].originFileObj?Promise.resolve():Promise.reject(new Error("Please upload document photo"))}],children:[e.jsx(be,{listType:"picture-card",fileList:b,onChange:w,beforeUpload:D,maxCount:1,accept:"image/*",children:b.length>=1?null:e.jsxs("div",{children:[e.jsx(fe,{}),e.jsx("div",{style:{marginTop:8},children:"Upload Document"})]})}),e.jsxs("div",{className:"upload-hint",children:[e.jsx("p",{children:"â€¢ Upload a clear photo of the document"}),e.jsx("p",{children:"â€¢ Supported formats: JPG, PNG, GIF"}),e.jsx("p",{children:"â€¢ Maximum file size: 10MB"})]})]}),e.jsxs("div",{className:"form-actions",children:[e.jsx(N,{onClick:P,disabled:i,children:"Cancel"}),e.jsx(N,{type:"primary",htmlType:"submit",loading:i,style:{marginLeft:"8px"},children:i?"Adding Member...":"Add Member"})]})]})})},ts=(d,a)=>{const o=Z();return ee({mutationFn:async t=>{try{console.log("ðŸ“¤ Updating gym member with payload:",t);const i=await Be(t);if(console.log("âœ… Update gym member response:",i),i?.status===200)return i;throw new Error(i?.message||"Failed to update gym member")}catch(i){throw console.error("âŒ Update gym member error:",i),i}},onSuccess:(t,i)=>{console.log("ðŸŽ‰ Gym member updated successfully:",t),u.success("Gym member updated successfully!"),d&&a&&o.invalidateQueries({queryKey:["gymMembers",d,a]}),o.invalidateQueries({queryKey:["gymMembers"]})},onError:t=>{console.error("âŒ Update gym member failed:",t);const i=t?.response?.data?.message||t?.message||"Failed to update gym member";u.error(i)}})},{Option:$}=_,as=({isVisible:d,onClose:a,selectedMember:o,selectedGymId:t,vendorId:i})=>{const[x]=h.useForm(),[b,y]=n.useState(!1),[f,w]=n.useState([]),D=ts(t,i);n.useEffect(()=>{o&&d&&(x.setFieldsValue({fullName:o.name,mobileNumber:o.mobile,password:o.raw?.nakedPassword||"",document:o.docType,documentNumber:o.docNo}),o.docImg&&o.docImg!=="memberimage"?w([{uid:"existing-doc",name:"existing-document.jpg",status:"done",url:o.docImg}]):w([]))},[o,d,x]);const A=({fileList:m})=>{w(m),m.length>0&&m[0].originFileObj?x.setFieldValue("memberDoc",m[0].originFileObj):x.setFieldValue("memberDoc",void 0),x.validateFields(["memberDoc"]).catch(()=>{})},P=async m=>{if(!o||!t){u.error("Missing member or gym information");return}try{y(!0);const g=new FormData;g.append("memberId",o.raw?.user_id||o.raw?.member_id||o.id),g.append("fullName",m.fullName),g.append("password",m.password),g.append("document",m.document),g.append("documentNumber",m.documentNumber),f.length>0&&f[0].originFileObj&&g.append("memberDoc",f[0].originFileObj,f[0].name),console.log("ðŸ“¤ Updating gym member (mirroring venue EditMember payload)"),await D.mutateAsync(g),x.resetFields(),w([]),a()}catch(g){console.error("âŒ Update gym member error:",g)}finally{y(!1)}},p=()=>{x.resetFields(),w([]),a()};return o?e.jsx(se,{title:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(R,{style:{color:"#1163C7"}}),"Edit Member - ",o.name]}),open:d,onCancel:p,footer:null,width:600,centered:!0,destroyOnClose:!0,children:e.jsxs(h,{form:x,layout:"vertical",onFinish:P,autoComplete:"off",className:"edit-member-form",children:[e.jsxs("div",{className:"form-row",children:[e.jsx(h.Item,{name:"fullName",label:"Full Name",rules:[{required:!0,message:"Please enter full name"},{min:2,message:"Name must be at least 2 characters"},{max:50,message:"Name must not exceed 50 characters"}],children:e.jsx(I,{placeholder:"Enter member's full name"})}),e.jsx(h.Item,{name:"mobileNumber",label:"Mobile Number",help:"Mobile number cannot be changed after member creation",children:e.jsx(I,{placeholder:"Mobile number",disabled:!0,style:{backgroundColor:"#f5f5f5",color:"#666",cursor:"not-allowed"}})})]}),e.jsxs("div",{className:"form-row",children:[e.jsx(h.Item,{name:"password",label:"Password",rules:[{required:!0,message:"Please enter password"},{min:6,message:"Password must be at least 6 characters"}],children:e.jsx(I.Password,{placeholder:"Enter password"})}),e.jsx(h.Item,{name:"document",label:"Document Type",rules:[{required:!0,message:"Please select document type"}],children:e.jsxs(_,{placeholder:"Select document type",children:[e.jsx($,{value:"Aadhar",children:"Aadhar Card"}),e.jsx($,{value:"Pan",children:"PAN Card"}),e.jsx($,{value:"Driving License",children:"Driving License"}),e.jsx($,{value:"Passport",children:"Passport"}),e.jsx($,{value:"Voter ID",children:"Voter ID"})]})})]}),e.jsxs("div",{className:"form-row",children:[e.jsx(h.Item,{name:"documentNumber",label:"Document Number",rules:[{required:!0,message:"Please enter document number"},{min:5,message:"Document number must be at least 5 characters"}],children:e.jsx(I,{placeholder:"Enter document number"})}),e.jsxs(h.Item,{label:"Document Photo",name:"memberDoc",rules:[{required:!1,message:"Please upload document photo",validator:(m,g)=>(f.length>0&&f[0].originFileObj,Promise.resolve())}],children:[e.jsx(be,{listType:"picture-card",fileList:f,onChange:A,beforeUpload:m=>m.type.startsWith("image/")?(m.size/1024/1024<10||u.error("Image must be smaller than 10MB!"),!1):(u.error("You can only upload image files!"),!1),maxCount:1,accept:"image/*",children:f.length>=1?null:e.jsxs("div",{children:[e.jsx(fe,{}),e.jsx("div",{style:{marginTop:8},children:"Upload Document"})]})}),e.jsxs("div",{className:"upload-hint",children:[e.jsx("p",{children:"â€¢ Upload a clear photo of the document"}),e.jsx("p",{children:"â€¢ Supported formats: JPG, PNG, GIF"}),e.jsx("p",{children:"â€¢ Maximum file size: 10MB"}),e.jsx("p",{children:"â€¢ Leave empty to keep current document"})]})]})]}),e.jsxs("div",{className:"form-actions",children:[e.jsx(N,{onClick:p,disabled:b,children:"Cancel"}),e.jsx(N,{type:"primary",htmlType:"submit",loading:b,style:{marginLeft:"8px"},children:b?"Updating Member...":"Update Member"})]})]})}):null},{Option:xe}=_;function Os(){_e();const d=De(s=>s.auth.user.id),[a,o]=n.useState(null),[t,i]=n.useState(1),[x,b]=n.useState(4),[y,f]=n.useState(null),[w,D]=n.useState(!1),[A,P]=n.useState(!1),[p,m]=n.useState(!1),[g,T]=n.useState(!1),[j,re]=n.useState(null),[ye,te]=n.useState(null),[F,ae]=n.useState(!1),[k,W]=n.useState([]),[M,O]=n.useState({}),[je,L]=n.useState({}),[ve,K]=n.useState(!1),{data:S,loading:U,error:ie}=Re(d),{data:C,loading:oe,error:ne,refetch:le}=Ze({gymId:a,vendorId:d}),we=es(a,d);Ve(),n.useEffect(()=>{S?.result?.length&&!a&&o(S.result[0].Id)},[S,a]),n.useEffect(()=>{W([]),O({}),L({})},[a]),n.useEffect(()=>{C?.result&&W([])},[C]);const me=s=>{D(!0),o(s),i(1),setTimeout(()=>{D(!1)},500)};n.useEffect(()=>{ie&&u.error("Failed to load gym list"),ne&&u.error("Failed to load gym members list")},[ie,ne]);const Q=n.useMemo(()=>S?.result?.find(s=>s.Id===a),[S?.result,a]),de=n.useMemo(()=>C?.result?C.result.map(s=>({id:s.id??s.member_id??s.user_id,name:s.full_name,position:"Staff",mobile:s.mobile_number,docType:s.document_name,docNo:s.document_number,docImg:s.document_file||"memberimage",gymId:s.gym_id||a,vendorId:s.vendor_id,raw:s})):[],[C?.result,a]),J=(t-1)*x,Y=de.slice(J,J+x),Ne=n.useCallback(()=>{if(!a){u.warning("Please select a gym first");return}m(!0)},[a]),Me=async s=>{try{f(s.id),ae(!0),console.log("ðŸ—‘ï¸ Deleting gym member:",s);const r=s.raw?.user_id||s.raw?.member_id;console.log("ðŸ” Member ID resolution:",{"member.raw?.user_id":s.raw?.user_id,"member.raw?.member_id":s.raw?.member_id,"member.id":s.id,"resolved memberId":r});const c={memberId:r,status:0};console.log("ðŸ“¤ Delete payload:",c),await we.mutateAsync(c),console.log("âœ… Delete successful")}catch(r){console.error("âŒ Delete error:",r)}finally{f(null),ae(!1)}},Se=n.useCallback(s=>{console.log("âœï¸ Editing gym member:",s),te(s),T(!0)},[]),Ie=n.useCallback(s=>{console.log("ðŸ‘ï¸ Viewing gym member:",s),re(s),P(!0)},[]),ce=n.useCallback((s,r)=>{const c=s?[...k,r.id]:k.filter(l=>l!==r.id);if(W(c),s&&!M[r.id]){const l=r.raw?.user_id||r.raw?.member_id||r.id;H(l,r.id)}},[k,M]),H=n.useCallback(async(s,r)=>{try{L(l=>({...l,[r]:!0})),console.log("ðŸ”„ Loading permissions for gym member:",{actualMemberId:s,tableRecordId:r});const c=await qe({memberId:s});if(console.log("ðŸ“¡ API Response:",c),c.status===200&&c.result&&c.result.length>0){const l=c.result[0],z=(l.permissions||[]).map(v=>({id:v.id,name:v.name,status:v.status,create_at:v.create_at,member_id:v.member_id}));O(v=>({...v,[r]:{permissions:z,memberInfo:{user_id:l.user_id,full_name:l.full_name,gym_id:l.gym_id,gym_name:l.gym_name,member_id:l.member_id,type:l.type}}})),console.log("âœ… Loaded permissions for gym member:",{actualMemberId:s,tableRecordId:r},z)}else O(l=>({...l,[r]:{permissions:[],memberInfo:{user_id:s,full_name:"Unknown Member",gym_id:a,gym_name:"Unknown Gym",member_id:s,type:1}}})),console.log("âš ï¸ No permissions found for gym member:",{actualMemberId:s,tableRecordId:r})}catch(c){console.error("âŒ Failed to load permissions:",c),u.error("Failed to load gym member permissions"),O(l=>({...l,[r]:{permissions:[],memberInfo:{user_id:s,full_name:"Unknown Member",gym_id:a,gym_name:"Unknown Gym",member_id:s,type:1}}}))}finally{L(c=>({...c,[r]:!1}))}},[a]),Pe=n.useCallback(async(s,r)=>{const c=Object.keys(M).find(l=>M[l]?.memberInfo?.user_id===s||M[l]?.memberInfo?.member_id===s)||s;try{L(Ce=>({...Ce,[c]:!0})),console.log("ðŸ”„ Updating permissions for gym member:",{actualMemberId:s,tableRecordId:c},r);const l=M[c]?.permissions?.length>0,B=M[c]?.memberInfo,z=B?.user_id||B?.member_id||s;console.log("ðŸ” Member ID resolution (following delete/update pattern):",{"input actualMemberId":s,"memberInfo.user_id":B?.user_id,"memberInfo.member_id":B?.member_id,"resolved resolvedMemberId":z});const v={memberId:parseInt(z),data:r};console.log("ðŸ“¤ Permission payload:",v);let G;if(l?(console.log("ðŸ“ Updating existing permissions..."),G=await $e(v)):(console.log("âž• Adding new permissions..."),G=await Oe(v)),console.log("ðŸ“¡ Permission API response:",G),G.status===200||G.status===201){console.log("âœ… Permission operation successful, refreshing..."),K(!0);try{await H(z,c),console.log("ðŸ”„ Refreshing gym members list..."),await le(),u.success(l?"Permissions updated successfully":"Permissions added successfully")}finally{K(!1)}}else throw new Error(G.message||"Failed to update permissions")}catch(l){throw console.error("âŒ Failed to update permissions:",l),l.response?.data?.message?u.error(`Failed to update permissions: ${l.response.data.message}`):l.message?u.error(`Failed to update permissions: ${l.message}`):u.error("Failed to update permissions. Please try again."),l}finally{L(l=>({...l,[c]:!1})),K(!1)}},[M,H,le]);return U?e.jsx("div",{className:"venue-card",children:e.jsxs("div",{className:"page-loading-container",children:[e.jsx(ue,{size:"large"}),e.jsx("div",{className:"page-loading-text",children:"Loading gyms..."})]})}):!a||w||a&&oe||a&&!C?e.jsxs("div",{className:"venue-card",children:[e.jsxs("div",{className:"venue-toolbar",children:[e.jsx(_,{placeholder:"Select Gym",className:"venue-select",loading:U,onChange:me,value:a||void 0,disabled:U||!S?.result?.length,children:S?.result?.map(s=>e.jsx(xe,{value:s.Id,children:s.gym_name},s.Id))}),e.jsx(N,{type:"primary",className:"add-btn",disabled:!0,children:"+ Add Gym Member"})]}),e.jsx("h3",{className:"venue-title",children:Q?.gym_name||"Select a gym to view members"}),e.jsxs("div",{className:"page-loading-container",children:[e.jsx(ue,{size:"large"}),e.jsx("div",{className:"page-loading-text",children:a?w?"Switching gym...":a&&!C?"Fetching gym members...":"Loading members...":"Please select a gym to view members"})]})]}):e.jsxs("div",{className:"venue-card",children:[e.jsxs("div",{className:"venue-toolbar",children:[e.jsx(_,{placeholder:"Select Gym",className:"venue-select",loading:U,onChange:me,value:a||void 0,disabled:U||!S?.result?.length,children:S?.result?.map(s=>e.jsx(xe,{value:s.Id,children:s.gym_name},s.Id))}),e.jsxs(N,{type:"primary",className:"add-btn",disabled:!a||F,onClick:Ne,children:["+ Add Gym Member",F&&e.jsx("span",{className:"processing-indicator",children:" (Processing...)"})]})]}),e.jsx("h3",{className:"venue-title",children:Q?.gym_name||"Select a gym to view members"}),e.jsx("div",{className:"members-table-container",children:Y?.length>0?e.jsx(Ke,{dataSource:Y,expandable:{expandedRowKeys:k,onExpand:ce,expandRowByClick:!1,expandedRowRender:s=>e.jsx("div",{className:"expanded-row-content",children:e.jsx(We,{memberId:s.raw?.user_id||s.raw?.member_id||s.id,memberName:s.name,initialPermissions:M[s.id]||{permissions:[],memberInfo:{}},onUpdatePermissions:Pe,loading:je[s.id]||ve||!1})})},columns:[{title:"Member",key:"member",width:250,render:(s,r,c)=>e.jsxs("div",{className:"member-info-cell",children:[e.jsx(pe,{size:40,icon:e.jsx(R,{}),style:{backgroundColor:"#1163C7",marginRight:12}}),e.jsxs("div",{className:"member-details",children:[e.jsxs("div",{className:"member-name",children:[e.jsx(E.Text,{strong:!0,children:r.name}),e.jsx(Je,{count:J+c+1,style:{backgroundColor:"#1163C7",marginLeft:8},size:"small"})]}),e.jsx("div",{className:"member-id",children:e.jsxs(E.Text,{type:"secondary",style:{fontSize:"12px"},children:["ID: ",r.raw?.custom_id||r.id]})})]})]})},{title:"Contact",key:"contact",width:150,render:(s,r)=>e.jsx("div",{className:"contact-cell",children:e.jsxs("div",{className:"contact-item",children:[e.jsx(ge,{style:{color:"#1163C7",marginRight:6}}),e.jsx(E.Text,{children:r.mobile})]})})},{title:"Document",key:"document",width:200,render:(s,r)=>e.jsx("div",{className:"document-cell",children:e.jsxs("div",{className:"document-info",children:[e.jsxs("div",{className:"document-type",children:[e.jsx(he,{style:{color:"#1163C7",marginRight:6}}),e.jsx(E.Text,{strong:!0,children:r.docType})]}),e.jsx("div",{className:"document-number",children:e.jsx(E.Text,{type:"secondary",style:{fontSize:"12px"},children:r.docNo})})]})})},{title:"Status",key:"status",width:100,render:(s,r)=>e.jsx(Ye,{color:"green",style:{borderRadius:12},children:"Active"})},{title:"Created",key:"created",width:120,render:(s,r)=>e.jsxs("div",{className:"created-cell",children:[e.jsx(Fe,{style:{color:"#1163C7",marginRight:4}}),e.jsx(E.Text,{type:"secondary",style:{fontSize:"12px"},children:r.raw?.created_at?new Date(r.raw.created_at).toLocaleDateString():"N/A"})]})},{title:"Actions",key:"actions",width:160,render:(s,r)=>e.jsxs(ke,{size:"small",children:[e.jsx(V,{title:"View Details",children:e.jsx(N,{type:"text",icon:e.jsx(X,{}),size:"small",disabled:y===r.id||F,onClick:()=>Ie(r),className:"action-btn view-btn"})}),e.jsx(V,{title:"Edit Gym Member",children:e.jsx(N,{type:"text",icon:e.jsx(ze,{}),size:"small",disabled:y===r.id||F,onClick:()=>Se(r),className:"action-btn edit-btn"})}),e.jsx(V,{title:"Manage Permissions",children:e.jsx(N,{type:"text",icon:e.jsx(Ge,{}),size:"small",disabled:y===r.id||F,onClick:()=>ce(!k.includes(r.id),r),className:`action-btn permission-btn ${k.includes(r.id)?"active":""}`})}),e.jsx(V,{title:y===r.id?"Deleting...":"Delete Gym Member",children:e.jsx(N,{type:"text",danger:!0,icon:e.jsx(He,{}),size:"small",loading:y===r.id,disabled:y===r.id||F,onClick:()=>Me(r),className:"action-btn delete-btn"})})]})}],pagination:!1,rowKey:"id",className:"enterprise-members-table",size:"middle",loading:oe}):e.jsx("div",{className:"empty-state-container",children:e.jsxs("div",{className:"empty-state-content",children:[e.jsx("div",{className:"empty-state-icon",children:e.jsx(R,{})}),e.jsx("h3",{className:"empty-state-title",children:"No Gym Members Found"}),e.jsx("p",{className:"empty-state-description",children:`This gym doesn't have any members yet. Click the "ADD GYM MEMBER" button to add your first member.`}),e.jsxs("div",{className:"empty-state-info",children:[e.jsxs("div",{className:"info-item",children:[e.jsx("span",{className:"info-label",children:"Member Types:"}),e.jsx("span",{className:"info-value",children:"Manager, Staff, Security"})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("span",{className:"info-label",children:"Required Documents:"}),e.jsx("span",{className:"info-value",children:"ID Proof, Address Proof"})]})]})]})})}),Y?.length>0&&e.jsx("div",{className:"members-footer",children:e.jsx(Qe,{current:t,pageSize:x,total:de.length,onChange:s=>i(s),showSizeChanger:!1,showQuickJumper:!1,showTotal:(s,r)=>`${r[0]}-${r[1]} of ${s} members`})}),e.jsx(se,{title:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(R,{style:{color:"#1163C7"}}),"Gym Member Details - ",j?.name]}),open:A,onCancel:()=>{P(!1),re(null)},footer:null,width:"auto",centered:!0,style:{maxWidth:"90vw"},children:j&&e.jsxs("div",{style:{maxWidth:"600px",margin:"0 auto"},children:[e.jsxs("div",{style:{marginBottom:"24px",padding:"24px",background:"linear-gradient(135deg, #1163C7 0%, #0d4a9e 100%)",borderRadius:"16px",color:"white",textAlign:"center",boxShadow:"0 8px 32px rgba(17, 99, 199, 0.3)"},children:[e.jsx("div",{style:{marginBottom:"16px"},children:e.jsx(pe,{size:80,icon:e.jsx(R,{}),style:{backgroundColor:"rgba(255, 255, 255, 0.2)",border:"3px solid rgba(255, 255, 255, 0.3)"}})}),e.jsx("h2",{style:{margin:"0 0 8px 0",color:"white",fontSize:"24px",fontWeight:"600"},children:j.name}),e.jsxs("div",{style:{display:"inline-block",padding:"6px 16px",backgroundColor:"rgba(255, 255, 255, 0.2)",borderRadius:"20px",fontSize:"14px",fontWeight:"500"},children:["Member ID: ",j.raw?.custom_id||j.id]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",marginBottom:"24px"},children:[e.jsxs("div",{style:{padding:"20px",backgroundColor:"#f8f9fa",borderRadius:"12px",border:"1px solid #e9ecef"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"16px",color:"#1163C7",fontWeight:"600",fontSize:"16px"},children:[e.jsx(ge,{style:{marginRight:"8px",fontSize:"18px"}}),"Contact Information"]}),e.jsxs("div",{style:{marginBottom:"12px"},children:[e.jsx("div",{style:{fontSize:"12px",color:"#6c757d",marginBottom:"4px"},children:"Mobile Number"}),e.jsx("div",{style:{fontSize:"16px",fontWeight:"500",color:"#212529"},children:j.mobile})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"12px",color:"#6c757d",marginBottom:"4px"},children:"Gym"}),e.jsx("div",{style:{fontSize:"16px",fontWeight:"500",color:"#212529"},children:Q?.gym_name})]})]}),e.jsxs("div",{style:{padding:"20px",backgroundColor:"#f8f9fa",borderRadius:"12px",border:"1px solid #e9ecef"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"16px",color:"#1163C7",fontWeight:"600",fontSize:"16px"},children:[e.jsx(he,{style:{marginRight:"8px",fontSize:"18px"}}),"Document Information"]}),e.jsxs("div",{style:{marginBottom:"12px"},children:[e.jsx("div",{style:{fontSize:"12px",color:"#6c757d",marginBottom:"4px"},children:"Document Type"}),e.jsx("div",{style:{fontSize:"16px",fontWeight:"500",color:"#212529"},children:j.docType})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"12px",color:"#6c757d",marginBottom:"4px"},children:"Document Number"}),e.jsx("div",{style:{fontSize:"16px",fontWeight:"500",color:"#212529",fontFamily:"monospace",backgroundColor:"#e9ecef",padding:"4px 8px",borderRadius:"4px",display:"inline-block"},children:j.docNo})]})]})]}),e.jsxs("div",{style:{padding:"20px",backgroundColor:"#f8f9fa",borderRadius:"12px",border:"1px solid #e9ecef",textAlign:"center"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"16px",color:"#1163C7",fontWeight:"600",fontSize:"16px"},children:[e.jsx(X,{style:{marginRight:"8px",fontSize:"18px"}}),"Document Photo"]}),e.jsx("div",{children:j.docImg&&j.docImg!=="memberimage"?e.jsx(Xe,{src:j.docImg,alt:`${j.name} document`,style:{maxWidth:"250px",maxHeight:"250px",objectFit:"contain",border:"2px solid #e9ecef",borderRadius:"12px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)"},preview:{mask:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",color:"white",fontWeight:"500"},children:[e.jsx(X,{}),"Click to view full size"]})}}):e.jsxs("div",{style:{padding:"60px 40px",border:"2px dashed #dee2e6",borderRadius:"12px",color:"#6c757d",fontSize:"16px",backgroundColor:"#ffffff"},children:[e.jsx(Ee,{style:{fontSize:"48px",marginBottom:"12px",display:"block"}}),"No Document Photo Available"]})})]})]})}),e.jsx(rs,{isVisible:p,onClose:()=>m(!1),selectedGymId:a}),e.jsx(as,{isVisible:g,onClose:()=>{T(!1),te(null)},selectedMember:ye,selectedGymId:a,vendorId:d})]})}export{Os as default};
