import{a as G,b as T,r as l,j as e,B as I}from"./index-XzM8Cj3c.js";/* empty css                  */import{a as P}from"./useFetchvendorVenues-D949lnpY.js";import{j as E}from"./endpointApi-DBrVeqMh.js";import{F as c}from"./index-BLf5ALDk.js";import{s as m}from"./index-Yvuj0Esb.js";import{R as A}from"./ArrowLeftOutlined-DMqiT_4K.js";import{S as u}from"./index-Ci-vNBFy.js";import{I as D}from"./index-Vt2X7eqz.js";import{U as O}from"./index-DpVHb5nB.js";import{R}from"./PlusOutlined-Dj0tFLrA.js";import"./useQuery-Beh9q-Hu.js";import"./useMutation-CNNl5TnA.js";import"./useForm-EwlPOCpB.js";import"./row-CTTWbxgc.js";import"./index-BfZvbS5e.js";import"./ExclamationCircleFilled-D7dRXMD9.js";import"./InfoCircleFilled-Ce5_6Fhy.js";import"./SearchOutlined-B0571LVy.js";import"./Input-BUj1c9yh.js";import"./EyeOutlined-BVmecd_y.js";import"./fade-_qbex92f.js";import"./DeleteOutlined-Ke0rSpX_.js";import"./DownloadOutlined-D_mskBw8.js";import"./progress-DW_vC4dS.js";const{Option:i}=u;function le(){const[o]=c.useForm(),h=G(),b=T(a=>a.auth.user.id),[t,g]=l.useState(null),[s,y]=l.useState([]),[p,f]=l.useState(!1),{data:n,loading:x,error:j}=P(b);l.useEffect(()=>{n?.result?.length&&!t&&g(n.result[0].Id)},[n,t]),l.useEffect(()=>{j&&m.error("Failed to load gym list")},[j]);const C=l.useCallback(async a=>{try{f(!0),console.log("Form Values:",a);const r=new FormData;r.append("gymId",t),r.append("coacheName",a.coacheName),r.append("coacheType",a.coacheType),r.append("type","gym"),s.length>0&&s[0].originFileObj&&r.append("image",s[0].originFileObj,s[0].name),console.log("FormData payload:",{gymId:t,coacheName:a.coacheName,coacheType:a.coacheType,type:"gym",image:s.length>0?s[0].name:"No file"});const d=await E(r);console.log("API Response:",d),d.status===200||d.status===201?(m.success("Gym coach added successfully!"),o.resetFields(),y([]),h("/vendor/gym/coaches")):m.error(d.message||"Failed to add gym coach")}catch(r){console.error("Error adding gym coach:",r),m.error(r.response?.data?.message||"Failed to add gym coach. Please try again.")}finally{f(!1)}},[t,s,h]),F=l.useCallback(({fileList:a})=>{y(a),a.length>0&&a[0].originFileObj?o.setFieldValue("coacheImage",a[0].originFileObj):o.setFieldValue("coacheImage",void 0),o.validateFields(["coacheImage"]).catch(()=>{})},[o]),N=a=>a.type.startsWith("image/")?(a.size/1024/1024<10||m.error("Image must be smaller than 10MB!"),!1):(m.error("You can only upload image files!"),!1),S=a=>{g(a),o.setFieldsValue({selectGym:a})},v=()=>{h("/vendor/gym/coaches")};return e.jsxs("div",{className:"add-member-container",children:[e.jsx("div",{style:{marginBottom:"20px"},children:e.jsx(I,{type:"text",icon:e.jsx(A,{}),onClick:v,style:{color:"#1163C7",fontSize:"16px",padding:"4px 8px",height:"auto"},children:"Back to Coaches"})}),e.jsxs(c,{layout:"vertical",onFinish:C,form:o,initialValues:{selectGym:t,coacheType:"HEAD"},children:[e.jsx("h2",{className:"member-title",children:"ADD GYM COACH"}),e.jsxs("div",{className:"member-form-row",children:[e.jsx(c.Item,{name:"selectGym",label:"Select Gym",rules:[{required:!0,message:"Please select a gym"}],children:e.jsx(u,{placeholder:"Select Gym",className:"member-Select",loading:x,onChange:S,disabled:x||!n?.result?.length,children:n?.result?.map(a=>e.jsx(i,{value:a.Id,children:a.gym_name},a.Id))})}),e.jsx(c.Item,{name:"coacheName",label:"Enter Coach Name",rules:[{required:!0,message:"Please enter coach name"}],children:e.jsx(D,{placeholder:"Enter coach full name"})})]}),e.jsxs("div",{className:"member-form-row",children:[e.jsx(c.Item,{name:"coacheType",label:"Select Coach Type",rules:[{required:!0,message:"Please select coach type"}],children:e.jsxs(u,{placeholder:"Select Coach Type",className:"member-Select",children:[e.jsx(i,{value:"HEAD",children:"Head Trainer"}),e.jsx(i,{value:"PERSONAL",children:"Personal Trainer"}),e.jsx(i,{value:"YOGA",children:"Yoga Instructor"}),e.jsx(i,{value:"FITNESS",children:"Fitness Instructor"}),e.jsx(i,{value:"CARDIO",children:"Cardio Specialist"}),e.jsx(i,{value:"STRENGTH",children:"Strength Trainer"})]})}),e.jsxs(c.Item,{label:"Upload Coach Photo",name:"coacheImage",rules:[{required:!0,message:"Please upload coach photo",validator:(a,r)=>s.length>0&&s[0].originFileObj?Promise.resolve():Promise.reject(new Error("Please upload coach photo"))}],children:[e.jsx(O,{listType:"picture-card",fileList:s,onChange:F,beforeUpload:N,maxCount:1,accept:"image/*",children:s.length>=1?null:e.jsxs("div",{children:[e.jsx(R,{}),e.jsx("div",{style:{marginTop:8},children:"Upload Photo"})]})}),e.jsxs("div",{className:"upload-hint",children:[e.jsx("p",{children:"• Upload a clear photo of the coach"}),e.jsx("p",{children:"• Supported formats: JPG, PNG, GIF"}),e.jsx("p",{children:"• Maximum file size: 10MB"})]})]})]}),e.jsx(c.Item,{className:"centered-submit",children:e.jsx(I,{type:"primary",htmlType:"submit",loading:p,disabled:!t||p,children:p?"ADDING COACH...":"ADD GYM COACH"})})]})]})}export{le as default};
