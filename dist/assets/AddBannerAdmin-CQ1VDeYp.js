import{r as v,j as e,B as y}from"./index-XzM8Cj3c.js";import{u as m}from"./UploadIcon-DVASWBXr.js";import{f as D,u as L,a as N}from"./useUpdateBanner-hbteqcYd.js";import{u as B}from"./useQuery-Beh9q-Hu.js";import{F as t}from"./index-BLf5ALDk.js";import{D as d}from"./index-B_VpdSuJ.js";import{S as i}from"./index-Ci-vNBFy.js";import{I}from"./index-Vt2X7eqz.js";import{U as c}from"./index-DpVHb5nB.js";import"./useMutation-CNNl5TnA.js";import"./useForm-EwlPOCpB.js";import"./row-CTTWbxgc.js";import"./index-BfZvbS5e.js";import"./ExclamationCircleFilled-D7dRXMD9.js";import"./SearchOutlined-B0571LVy.js";import"./Input-BUj1c9yh.js";import"./EyeOutlined-BVmecd_y.js";import"./fade-_qbex92f.js";import"./DeleteOutlined-Ke0rSpX_.js";import"./DownloadOutlined-D_mskBw8.js";import"./progress-DW_vC4dS.js";const F=()=>B({queryKey:["customCityList"],queryFn:()=>D(),onSuccess:l=>{console.log("Custom city list fetched successfully",l)},onError:l=>{console.error("Error fetching custom city list",l)}}),{Option:a}=i;function W(){const[l,n]=v.useState(!1),[o]=t.useForm(),u=L(),p=N(),{data:h,isLoading:x}=F(),j=h?.result||[],f=r=>{n(!0);const s=new FormData;s.append("startDate",r.startDate?.format("YYYY-MM-DD")),s.append("endDate",r.endDate?.format("YYYY-MM-DD")),s.append("url",r.pageLink),s.append("bannerType","1"),r.desktopBanner?.length>0&&s.append("desktopImage",r.desktopBanner[0].originFileObj),r.mobileBanner?.length>0&&s.append("mobileImage",r.mobileBanner[0].originFileObj),console.log("Submitted values:",s),u.mutate(s,{onSuccess:g=>{const b={bannerId:g?.result,location:r.location,page:r.page.map(Number),position:Number(r.position)};p.mutate(b,{onSettled:()=>{n(!1)}}),o.resetFields()},onError:()=>n(!1)})};return e.jsxs("div",{className:"banner-form-container",children:[e.jsx("h3",{className:"form-title",children:"Add Banners"}),e.jsxs(t,{form:o,layout:"vertical",onFinish:f,className:"banner-form",children:[e.jsxs("div",{className:"form-row",children:[e.jsx(t.Item,{label:"Start Date",name:"startDate",rules:[{required:!0}],children:e.jsx(d,{style:{width:"100%"}})}),e.jsx(t.Item,{label:"End Date",name:"endDate",rules:[{required:!0}],children:e.jsx(d,{style:{width:"100%"}})})]}),e.jsxs("div",{className:"form-row",children:[e.jsx(t.Item,{label:"Location",name:"location",rules:[{required:!0}],children:e.jsx(i,{placeholder:"Select Location",mode:"multiple",allowClear:!0,loading:x,showSearch:!0,optionFilterProp:"children",children:j.map(r=>e.jsx(a,{value:r.name,children:r.name},r.id))})}),e.jsx(t.Item,{label:"Enter Page Link To Redirect",name:"pageLink",rules:[{required:!0}],children:e.jsx(I,{placeholder:"Enter URL"})})]}),e.jsxs("div",{className:"form-row",children:[e.jsx(t.Item,{label:"Pages",name:"page",rules:[{required:!0}],children:e.jsxs(i,{placeholder:"Select Pages",mode:"multiple",allowClear:!0,children:[e.jsx(a,{value:1,children:"Home"}),e.jsx(a,{value:2,children:"Turf List"}),e.jsx(a,{value:3,children:"Event List"}),e.jsx(a,{value:4,children:"Run List"}),e.jsx(a,{value:5,children:"Gym List"}),e.jsx(a,{value:6,children:"Turf Details"}),e.jsx(a,{value:7,children:"Event Details"}),e.jsx(a,{value:8,children:"Run Details"}),e.jsx(a,{value:9,children:"Gym Details"}),e.jsx(a,{value:10,children:"SuccessfulPage"})]})}),e.jsx(t.Item,{label:"BannerPosition",name:"position",rules:[{required:!0}],children:e.jsxs(i,{placeholder:"Select Banner Position",children:[e.jsx(a,{value:"1",children:"1"}),e.jsx(a,{value:"2",children:"2"}),e.jsx(a,{value:"3",children:"3"}),e.jsx(a,{value:"4",children:"4"}),e.jsx(a,{value:"5",children:"5"}),e.jsx(a,{value:"6",children:"6"})]})})]}),e.jsxs("div",{className:"form-row",children:[e.jsx(t.Item,{label:"Upload Banner Image (For Desktop)",name:"desktopBanner",valuePropName:"fileList",getValueFromEvent:r=>r?.fileList,rules:[{required:!0}],children:e.jsx(c,{listType:"picture",beforeUpload:()=>!1,className:"upload-banner-image",children:e.jsxs("div",{className:"upload-banner",children:[e.jsx("img",{src:m,alt:"Upload",className:"desktop-image"}),e.jsxs("div",{children:["Upload Image",e.jsx("br",{}),"(Size 430px * 200px)"]})]})})}),e.jsx(t.Item,{label:"Upload Banner Image (For Mobile)",name:"mobileBanner",valuePropName:"fileList",getValueFromEvent:r=>r?.fileList,rules:[{required:!0}],children:e.jsx(c,{listType:"picture",beforeUpload:()=>!1,className:"upload-banner-image",children:e.jsxs("div",{className:"upload-banner",children:[e.jsx("img",{src:m,alt:"Upload",className:"desktop-image"}),e.jsxs("div",{children:["Upload Image",e.jsx("br",{}),"(Size 430px * 200px)"]})]})})})]}),e.jsx(t.Item,{style:{textAlign:"center"},children:e.jsx(y,{type:"primary",htmlType:"submit",className:"submit-btn",loading:l,children:"UPDATE BANNER"})})]})]})}export{W as default};
