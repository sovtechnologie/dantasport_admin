(function(le,M){typeof exports=="object"&&typeof module<"u"?M(exports,require("react"),require("antd")):typeof define=="function"&&define.amd?define(["exports","react","antd"],M):(le=typeof globalThis<"u"?globalThis:le||self,M(le.AntTableExtensions={},le.React,le.antd))})(this,function(le,M,Me){"use strict";var $e=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ze={},Pt={get exports(){return ze},set exports(e){ze=e}};/* @license
Papa Parse
v5.4.1
https://github.com/mholt/PapaParse
License: MIT
*/(function(e,t){(function(r,n){e.exports=n()})($e,function r(){var n=typeof self<"u"?self:typeof window<"u"?window:n!==void 0?n:{},a=!n.document&&!!n.postMessage,c=n.IS_PAPA_WORKER||!1,h={},l=0,o={parse:function(s,i){var u=(i=i||{}).dynamicTyping||!1;if(v(u)&&(i.dynamicTypingFunction=u,u={}),i.dynamicTyping=u,i.transform=!!v(i.transform)&&i.transform,i.worker&&o.WORKERS_SUPPORTED){var g=function(){if(!o.WORKERS_SUPPORTED)return!1;var I=(H=n.URL||n.webkitURL||null,D=r.toString(),o.BLOB_URL||(o.BLOB_URL=H.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",D,")();"],{type:"text/javascript"})))),w=new n.Worker(I),H,D;return w.onmessage=q,w.id=l++,h[w.id]=w}();return g.userStep=i.step,g.userChunk=i.chunk,g.userComplete=i.complete,g.userError=i.error,i.step=v(i.step),i.chunk=v(i.chunk),i.complete=v(i.complete),i.error=v(i.error),delete i.worker,void g.postMessage({input:s,config:i,workerId:g.id})}var _=null;return o.NODE_STREAM_INPUT,typeof s=="string"?(s=function(I){return I.charCodeAt(0)===65279?I.slice(1):I}(s),_=i.download?new p(i):new x(i)):s.readable===!0&&v(s.read)&&v(s.on)?_=new O(i):(n.File&&s instanceof File||s instanceof Object)&&(_=new E(i)),_.stream(s)},unparse:function(s,i){var u=!1,g=!0,_=",",I=`\r
`,w='"',H=w+w,D=!1,y=null,W=!1;(function(){if(typeof i=="object"){if(typeof i.delimiter!="string"||o.BAD_DELIMITERS.filter(function(m){return i.delimiter.indexOf(m)!==-1}).length||(_=i.delimiter),(typeof i.quotes=="boolean"||typeof i.quotes=="function"||Array.isArray(i.quotes))&&(u=i.quotes),typeof i.skipEmptyLines!="boolean"&&typeof i.skipEmptyLines!="string"||(D=i.skipEmptyLines),typeof i.newline=="string"&&(I=i.newline),typeof i.quoteChar=="string"&&(w=i.quoteChar),typeof i.header=="boolean"&&(g=i.header),Array.isArray(i.columns)){if(i.columns.length===0)throw new Error("Option columns is empty");y=i.columns}i.escapeChar!==void 0&&(H=i.escapeChar+w),(typeof i.escapeFormulae=="boolean"||i.escapeFormulae instanceof RegExp)&&(W=i.escapeFormulae instanceof RegExp?i.escapeFormulae:/^[=+\-@\t\r].*$/)}})();var C=new RegExp(A(w),"g");if(typeof s=="string"&&(s=JSON.parse(s)),Array.isArray(s)){if(!s.length||Array.isArray(s[0]))return ce(null,s,D);if(typeof s[0]=="object")return ce(y||Object.keys(s[0]),s,D)}else if(typeof s=="object")return typeof s.data=="string"&&(s.data=JSON.parse(s.data)),Array.isArray(s.data)&&(s.fields||(s.fields=s.meta&&s.meta.fields||y),s.fields||(s.fields=Array.isArray(s.data[0])?s.fields:typeof s.data[0]=="object"?Object.keys(s.data[0]):[]),Array.isArray(s.data[0])||typeof s.data[0]=="object"||(s.data=[s.data])),ce(s.fields||[],s.data||[],D);throw new Error("Unable to serialize unrecognized input");function ce(m,F,te){var B="";typeof m=="string"&&(m=JSON.parse(m)),typeof F=="string"&&(F=JSON.parse(F));var Z=Array.isArray(m)&&0<m.length,Y=!Array.isArray(F[0]);if(Z&&g){for(var X=0;X<m.length;X++)0<X&&(B+=_),B+=ee(m[X],X);0<F.length&&(B+=I)}for(var b=0;b<F.length;b++){var T=Z?m.length:F[b].length,z=!1,V=Z?Object.keys(F[b]).length===0:F[b].length===0;if(te&&!Z&&(z=te==="greedy"?F[b].join("").trim()==="":F[b].length===1&&F[b][0].length===0),te==="greedy"&&Z){for(var j=[],re=0;re<T;re++){var G=Y?m[re]:re;j.push(F[b][G])}z=j.join("").trim()===""}if(!z){for(var P=0;P<T;P++){0<P&&!V&&(B+=_);var he=Z&&Y?m[P]:P;B+=ee(F[b][he],P)}b<F.length-1&&(!te||0<T&&!V)&&(B+=I)}}return B}function ee(m,F){if(m==null)return"";if(m.constructor===Date)return JSON.stringify(m).slice(1,25);var te=!1;W&&typeof m=="string"&&W.test(m)&&(m="'"+m,te=!0);var B=m.toString().replace(C,H);return(te=te||u===!0||typeof u=="function"&&u(m,F)||Array.isArray(u)&&u[F]||function(Z,Y){for(var X=0;X<Y.length;X++)if(-1<Z.indexOf(Y[X]))return!0;return!1}(B,o.BAD_DELIMITERS)||-1<B.indexOf(_)||B.charAt(0)===" "||B.charAt(B.length-1)===" ")?w+B+w:B}}};if(o.RECORD_SEP=String.fromCharCode(30),o.UNIT_SEP=String.fromCharCode(31),o.BYTE_ORDER_MARK="\uFEFF",o.BAD_DELIMITERS=["\r",`
`,'"',o.BYTE_ORDER_MARK],o.WORKERS_SUPPORTED=!a&&!!n.Worker,o.NODE_STREAM_INPUT=1,o.LocalChunkSize=10485760,o.RemoteChunkSize=5242880,o.DefaultDelimiter=",",o.Parser=S,o.ParserHandle=L,o.NetworkStreamer=p,o.FileStreamer=E,o.StringStreamer=x,o.ReadableStreamStreamer=O,n.jQuery){var f=n.jQuery;f.fn.parse=function(s){var i=s.config||{},u=[];return this.each(function(I){if(!(f(this).prop("tagName").toUpperCase()==="INPUT"&&f(this).attr("type").toLowerCase()==="file"&&n.FileReader)||!this.files||this.files.length===0)return!0;for(var w=0;w<this.files.length;w++)u.push({file:this.files[w],inputElem:this,instanceConfig:f.extend({},i)})}),g(),this;function g(){if(u.length!==0){var I,w,H,D,y=u[0];if(v(s.before)){var W=s.before(y.file,y.inputElem);if(typeof W=="object"){if(W.action==="abort")return I="AbortError",w=y.file,H=y.inputElem,D=W.reason,void(v(s.error)&&s.error({name:I},w,H,D));if(W.action==="skip")return void _();typeof W.config=="object"&&(y.instanceConfig=f.extend(y.instanceConfig,W.config))}else if(W==="skip")return void _()}var C=y.instanceConfig.complete;y.instanceConfig.complete=function(ce){v(C)&&C(ce,y.file,y.inputElem),_()},o.parse(y.file,y.instanceConfig)}else v(s.complete)&&s.complete()}function _(){u.splice(0,1),g()}}}function d(s){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(i){var u=J(i);u.chunkSize=parseInt(u.chunkSize),i.step||i.chunk||(u.chunkSize=null),this._handle=new L(u),(this._handle.streamer=this)._config=u}.call(this,s),this.parseChunk=function(i,u){if(this.isFirstChunk&&v(this._config.beforeFirstChunk)){var g=this._config.beforeFirstChunk(i);g!==void 0&&(i=g)}this.isFirstChunk=!1,this._halted=!1;var _=this._partialLine+i;this._partialLine="";var I=this._handle.parse(_,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var w=I.meta.cursor;this._finished||(this._partialLine=_.substring(w-this._baseIndex),this._baseIndex=w),I&&I.data&&(this._rowCount+=I.data.length);var H=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(c)n.postMessage({results:I,workerId:o.WORKER_ID,finished:H});else if(v(this._config.chunk)&&!u){if(this._config.chunk(I,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);I=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(I.data),this._completeResults.errors=this._completeResults.errors.concat(I.errors),this._completeResults.meta=I.meta),this._completed||!H||!v(this._config.complete)||I&&I.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),H||I&&I.meta.paused||this._nextChunk(),I}this._halted=!0},this._sendError=function(i){v(this._config.error)?this._config.error(i):c&&this._config.error&&n.postMessage({workerId:o.WORKER_ID,error:i,finished:!1})}}function p(s){var i;(s=s||{}).chunkSize||(s.chunkSize=o.RemoteChunkSize),d.call(this,s),this._nextChunk=a?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(u){this._input=u,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(i=new XMLHttpRequest,this._config.withCredentials&&(i.withCredentials=this._config.withCredentials),a||(i.onload=$(this._chunkLoaded,this),i.onerror=$(this._chunkError,this)),i.open(this._config.downloadRequestBody?"POST":"GET",this._input,!a),this._config.downloadRequestHeaders){var u=this._config.downloadRequestHeaders;for(var g in u)i.setRequestHeader(g,u[g])}if(this._config.chunkSize){var _=this._start+this._config.chunkSize-1;i.setRequestHeader("Range","bytes="+this._start+"-"+_)}try{i.send(this._config.downloadRequestBody)}catch(I){this._chunkError(I.message)}a&&i.status===0&&this._chunkError()}},this._chunkLoaded=function(){i.readyState===4&&(i.status<200||400<=i.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:i.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(u){var g=u.getResponseHeader("Content-Range");return g===null?-1:parseInt(g.substring(g.lastIndexOf("/")+1))}(i),this.parseChunk(i.responseText)))},this._chunkError=function(u){var g=i.statusText||u;this._sendError(new Error(g))}}function E(s){var i,u;(s=s||{}).chunkSize||(s.chunkSize=o.LocalChunkSize),d.call(this,s);var g=typeof FileReader<"u";this.stream=function(_){this._input=_,u=_.slice||_.webkitSlice||_.mozSlice,g?((i=new FileReader).onload=$(this._chunkLoaded,this),i.onerror=$(this._chunkError,this)):i=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var _=this._input;if(this._config.chunkSize){var I=Math.min(this._start+this._config.chunkSize,this._input.size);_=u.call(_,this._start,I)}var w=i.readAsText(_,this._config.encoding);g||this._chunkLoaded({target:{result:w}})},this._chunkLoaded=function(_){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(_.target.result)},this._chunkError=function(){this._sendError(i.error)}}function x(s){var i;d.call(this,s=s||{}),this.stream=function(u){return i=u,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var u,g=this._config.chunkSize;return g?(u=i.substring(0,g),i=i.substring(g)):(u=i,i=""),this._finished=!i,this.parseChunk(u)}}}function O(s){d.call(this,s=s||{});var i=[],u=!0,g=!1;this.pause=function(){d.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){d.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(_){this._input=_,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){g&&i.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),i.length?this.parseChunk(i.shift()):u=!0},this._streamData=$(function(_){try{i.push(typeof _=="string"?_:_.toString(this._config.encoding)),u&&(u=!1,this._checkIsFinished(),this.parseChunk(i.shift()))}catch(I){this._streamError(I)}},this),this._streamError=$(function(_){this._streamCleanUp(),this._sendError(_)},this),this._streamEnd=$(function(){this._streamCleanUp(),g=!0,this._streamData("")},this),this._streamCleanUp=$(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function L(s){var i,u,g,_=Math.pow(2,53),I=-_,w=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,H=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,D=this,y=0,W=0,C=!1,ce=!1,ee=[],m={data:[],errors:[],meta:{}};if(v(s.step)){var F=s.step;s.step=function(b){if(m=b,Z())B();else{if(B(),m.data.length===0)return;y+=b.data.length,s.preview&&y>s.preview?u.abort():(m.data=m.data[0],F(m,D))}}}function te(b){return s.skipEmptyLines==="greedy"?b.join("").trim()==="":b.length===1&&b[0].length===0}function B(){return m&&g&&(X("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+o.DefaultDelimiter+"'"),g=!1),s.skipEmptyLines&&(m.data=m.data.filter(function(b){return!te(b)})),Z()&&function(){if(!m)return;function b(z,V){v(s.transformHeader)&&(z=s.transformHeader(z,V)),ee.push(z)}if(Array.isArray(m.data[0])){for(var T=0;Z()&&T<m.data.length;T++)m.data[T].forEach(b);m.data.splice(0,1)}else m.data.forEach(b)}(),function(){if(!m||!s.header&&!s.dynamicTyping&&!s.transform)return m;function b(z,V){var j,re=s.header?{}:[];for(j=0;j<z.length;j++){var G=j,P=z[j];s.header&&(G=j>=ee.length?"__parsed_extra":ee[j]),s.transform&&(P=s.transform(P,G)),P=Y(G,P),G==="__parsed_extra"?(re[G]=re[G]||[],re[G].push(P)):re[G]=P}return s.header&&(j>ee.length?X("FieldMismatch","TooManyFields","Too many fields: expected "+ee.length+" fields but parsed "+j,W+V):j<ee.length&&X("FieldMismatch","TooFewFields","Too few fields: expected "+ee.length+" fields but parsed "+j,W+V)),re}var T=1;return!m.data.length||Array.isArray(m.data[0])?(m.data=m.data.map(b),T=m.data.length):m.data=b(m.data,0),s.header&&m.meta&&(m.meta.fields=ee),W+=T,m}()}function Z(){return s.header&&ee.length===0}function Y(b,T){return z=b,s.dynamicTypingFunction&&s.dynamicTyping[z]===void 0&&(s.dynamicTyping[z]=s.dynamicTypingFunction(z)),(s.dynamicTyping[z]||s.dynamicTyping)===!0?T==="true"||T==="TRUE"||T!=="false"&&T!=="FALSE"&&(function(V){if(w.test(V)){var j=parseFloat(V);if(I<j&&j<_)return!0}return!1}(T)?parseFloat(T):H.test(T)?new Date(T):T===""?null:T):T;var z}function X(b,T,z,V){var j={type:b,code:T,message:z};V!==void 0&&(j.row=V),m.errors.push(j)}this.parse=function(b,T,z){var V=s.quoteChar||'"';if(s.newline||(s.newline=function(G,P){G=G.substring(0,1048576);var he=new RegExp(A(P)+"([^]*?)"+A(P),"gm"),ie=(G=G.replace(he,"")).split("\r"),fe=G.split(`
`),pe=1<fe.length&&fe[0].length<ie[0].length;if(ie.length===1||pe)return`
`;for(var se=0,K=0;K<ie.length;K++)ie[K][0]===`
`&&se++;return se>=ie.length/2?`\r
`:"\r"}(b,V)),g=!1,s.delimiter)v(s.delimiter)&&(s.delimiter=s.delimiter(b),m.meta.delimiter=s.delimiter);else{var j=function(G,P,he,ie,fe){var pe,se,K,Q;fe=fe||[",","	","|",";",o.RECORD_SEP,o.UNIT_SEP];for(var Ee=0;Ee<fe.length;Ee++){var R=fe[Ee],Oe=0,ge=0,Ce=0;K=void 0;for(var me=new S({comments:ie,delimiter:R,newline:P,preview:10}).parse(G),ye=0;ye<me.data.length;ye++)if(he&&te(me.data[ye]))Ce++;else{var ve=me.data[ye].length;ge+=ve,K!==void 0?0<ve&&(Oe+=Math.abs(ve-K),K=ve):K=ve}0<me.data.length&&(ge/=me.data.length-Ce),(se===void 0||Oe<=se)&&(Q===void 0||Q<ge)&&1.99<ge&&(se=Oe,pe=R,Q=ge)}return{successful:!!(s.delimiter=pe),bestDelimiter:pe}}(b,s.newline,s.skipEmptyLines,s.comments,s.delimitersToGuess);j.successful?s.delimiter=j.bestDelimiter:(g=!0,s.delimiter=o.DefaultDelimiter),m.meta.delimiter=s.delimiter}var re=J(s);return s.preview&&s.header&&re.preview++,i=b,u=new S(re),m=u.parse(i,T,z),B(),C?{meta:{paused:!0}}:m||{meta:{paused:!1}}},this.paused=function(){return C},this.pause=function(){C=!0,u.abort(),i=v(s.chunk)?"":i.substring(u.getCharIndex())},this.resume=function(){D.streamer._halted?(C=!1,D.streamer.parseChunk(i,!0)):setTimeout(D.resume,3)},this.aborted=function(){return ce},this.abort=function(){ce=!0,u.abort(),m.meta.aborted=!0,v(s.complete)&&s.complete(m),i=""}}function A(s){return s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function S(s){var i,u=(s=s||{}).delimiter,g=s.newline,_=s.comments,I=s.step,w=s.preview,H=s.fastMode,D=i=s.quoteChar===void 0||s.quoteChar===null?'"':s.quoteChar;if(s.escapeChar!==void 0&&(D=s.escapeChar),(typeof u!="string"||-1<o.BAD_DELIMITERS.indexOf(u))&&(u=","),_===u)throw new Error("Comment character same as delimiter");_===!0?_="#":(typeof _!="string"||-1<o.BAD_DELIMITERS.indexOf(_))&&(_=!1),g!==`
`&&g!=="\r"&&g!==`\r
`&&(g=`
`);var y=0,W=!1;this.parse=function(C,ce,ee){if(typeof C!="string")throw new Error("Input must be a string");var m=C.length,F=u.length,te=g.length,B=_.length,Z=v(I),Y=[],X=[],b=[],T=y=0;if(!C)return ae();if(s.header&&!ce){var z=C.split(g)[0].split(u),V=[],j={},re=!1;for(var G in z){var P=z[G];v(s.transformHeader)&&(P=s.transformHeader(P,G));var he=P,ie=j[P]||0;for(0<ie&&(re=!0,he=P+"_"+ie),j[P]=ie+1;V.includes(he);)he=he+"_"+ie;V.push(he)}if(re){var fe=C.split(g);fe[0]=V.join(u),C=fe.join(g)}}if(H||H!==!1&&C.indexOf(i)===-1){for(var pe=C.split(g),se=0;se<pe.length;se++){if(b=pe[se],y+=b.length,se!==pe.length-1)y+=g.length;else if(ee)return ae();if(!_||b.substring(0,B)!==_){if(Z){if(Y=[],Ce(b.split(u)),Fe(),W)return ae()}else Ce(b.split(u));if(w&&w<=se)return Y=Y.slice(0,w),ae(!0)}}return ae()}for(var K=C.indexOf(u,y),Q=C.indexOf(g,y),Ee=new RegExp(A(D)+A(i),"g"),R=C.indexOf(i,y);;)if(C[y]!==i)if(_&&b.length===0&&C.substring(y,y+B)===_){if(Q===-1)return ae();y=Q+te,Q=C.indexOf(g,y),K=C.indexOf(u,y)}else if(K!==-1&&(K<Q||Q===-1))b.push(C.substring(y,K)),y=K+F,K=C.indexOf(u,y);else{if(Q===-1)break;if(b.push(C.substring(y,Q)),ve(Q+te),Z&&(Fe(),W))return ae();if(w&&Y.length>=w)return ae(!0)}else for(R=y,y++;;){if((R=C.indexOf(i,R+1))===-1)return ee||X.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:Y.length,index:y}),ye();if(R===m-1)return ye(C.substring(y,R).replace(Ee,i));if(i!==D||C[R+1]!==D){if(i===D||R===0||C[R-1]!==D){K!==-1&&K<R+1&&(K=C.indexOf(u,R+1)),Q!==-1&&Q<R+1&&(Q=C.indexOf(g,R+1));var Oe=me(Q===-1?K:Math.min(K,Q));if(C.substr(R+1+Oe,F)===u){b.push(C.substring(y,R).replace(Ee,i)),C[y=R+1+Oe+F]!==i&&(R=C.indexOf(i,y)),K=C.indexOf(u,y),Q=C.indexOf(g,y);break}var ge=me(Q);if(C.substring(R+1+ge,R+1+ge+te)===g){if(b.push(C.substring(y,R).replace(Ee,i)),ve(R+1+ge+te),K=C.indexOf(u,y),R=C.indexOf(i,y),Z&&(Fe(),W))return ae();if(w&&Y.length>=w)return ae(!0);break}X.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:Y.length,index:y}),R++}}else R++}return ye();function Ce(oe){Y.push(oe),T=y}function me(oe){var Dt=0;if(oe!==-1){var tt=C.substring(R+1,oe);tt&&tt.trim()===""&&(Dt=tt.length)}return Dt}function ye(oe){return ee||(oe===void 0&&(oe=C.substring(y)),b.push(oe),y=m,Ce(b),Z&&Fe()),ae()}function ve(oe){y=oe,Ce(b),b=[],Q=C.indexOf(g,y)}function ae(oe){return{data:Y,errors:X,meta:{delimiter:u,linebreak:g,aborted:W,truncated:!!oe,cursor:T+(ce||0)}}}function Fe(){I(ae()),Y=[],X=[]}},this.abort=function(){W=!0},this.getCharIndex=function(){return y}}function q(s){var i=s.data,u=h[i.workerId],g=!1;if(i.error)u.userError(i.error,i.file);else if(i.results&&i.results.data){var _={abort:function(){g=!0,N(i.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:U,resume:U};if(v(u.userStep)){for(var I=0;I<i.results.data.length&&(u.userStep({data:i.results.data[I],errors:i.results.errors,meta:i.results.meta},_),!g);I++);delete i.results}else v(u.userChunk)&&(u.userChunk(i.results,_,i.file),delete i.results)}i.finished&&!g&&N(i.workerId,i.results)}function N(s,i){var u=h[s];v(u.userComplete)&&u.userComplete(i),u.terminate(),delete h[s]}function U(){throw new Error("Not implemented.")}function J(s){if(typeof s!="object"||s===null)return s;var i=Array.isArray(s)?[]:{};for(var u in s)i[u]=J(s[u]);return i}function $(s,i){return function(){s.apply(i,arguments)}}function v(s){return typeof s=="function"}return c&&(n.onmessage=function(s){var i=s.data;if(o.WORKER_ID===void 0&&i&&(o.WORKER_ID=i.workerId),typeof i.input=="string")n.postMessage({workerId:o.WORKER_ID,results:o.parse(i.input,i.config),finished:!0});else if(n.File&&i.input instanceof File||i.input instanceof Object){var u=o.parse(i.input,i.config);u&&n.postMessage({workerId:o.WORKER_ID,results:u,finished:!0})}}),(p.prototype=Object.create(d.prototype)).constructor=p,(E.prototype=Object.create(d.prototype)).constructor=E,(x.prototype=Object.create(x.prototype)).constructor=x,(O.prototype=Object.create(d.prototype)).constructor=O,o})})(Pt);var Ft=Array.isArray,Ke=Ft,zt=typeof $e=="object"&&$e&&$e.Object===Object&&$e,Kt=zt,Ht=Kt,Bt=typeof self=="object"&&self&&self.Object===Object&&self,Ut=Ht||Bt||Function("return this")(),Te=Ut,Wt=Te,Gt=Wt.Symbol,He=Gt,rt=He,nt=Object.prototype,qt=nt.hasOwnProperty,Qt=nt.toString,Se=rt?rt.toStringTag:void 0;function Jt(e){var t=qt.call(e,Se),r=e[Se];try{e[Se]=void 0;var n=!0}catch{}var a=Qt.call(e);return n&&(t?e[Se]=r:delete e[Se]),a}var Vt=Jt,Yt=Object.prototype,Xt=Yt.toString;function Zt(e){return Xt.call(e)}var er=Zt,it=He,tr=Vt,rr=er,nr="[object Null]",ir="[object Undefined]",st=it?it.toStringTag:void 0;function sr(e){return e==null?e===void 0?ir:nr:st&&st in Object(e)?tr(e):rr(e)}var at=sr;function ar(e){return e!=null&&typeof e=="object"}var or=ar,cr=at,hr=or,lr="[object Symbol]";function ur(e){return typeof e=="symbol"||hr(e)&&cr(e)==lr}var Ae=ur,fr=Ke,dr=Ae,pr=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,gr=/^\w*$/;function _r(e,t){if(fr(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||dr(e)?!0:gr.test(e)||!pr.test(e)||t!=null&&e in Object(t)}var mr=_r;function yr(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Le=yr,vr=at,br=Le,Er="[object AsyncFunction]",Cr="[object Function]",xr="[object GeneratorFunction]",wr="[object Proxy]";function kr(e){if(!br(e))return!1;var t=vr(e);return t==Cr||t==xr||t==Er||t==wr}var Ir=kr,Or=Te,Mr=Or["__core-js_shared__"],$r=Mr,Be=$r,ot=function(){var e=/[^.]+$/.exec(Be&&Be.keys&&Be.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function Sr(e){return!!ot&&ot in e}var Tr=Sr,Ar=Function.prototype,Lr=Ar.toString;function Rr(e){if(e!=null){try{return Lr.call(e)}catch{}try{return e+""}catch{}}return""}var jr=Rr,Nr=Ir,Dr=Tr,Pr=Le,Fr=jr,zr=/[\\^$.*+?()[\]{}|]/g,Kr=/^\[object .+?Constructor\]$/,Hr=Function.prototype,Br=Object.prototype,Ur=Hr.toString,Wr=Br.hasOwnProperty,Gr=RegExp("^"+Ur.call(Wr).replace(zr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function qr(e){if(!Pr(e)||Dr(e))return!1;var t=Nr(e)?Gr:Kr;return t.test(Fr(e))}var Qr=qr;function Jr(e,t){return e==null?void 0:e[t]}var Vr=Jr,Yr=Qr,Xr=Vr;function Zr(e,t){var r=Xr(e,t);return Yr(r)?r:void 0}var ct=Zr,en=ct,tn=en(Object,"create"),Re=tn,ht=Re;function rn(){this.__data__=ht?ht(null):{},this.size=0}var nn=rn;function sn(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var an=sn,on=Re,cn="__lodash_hash_undefined__",hn=Object.prototype,ln=hn.hasOwnProperty;function un(e){var t=this.__data__;if(on){var r=t[e];return r===cn?void 0:r}return ln.call(t,e)?t[e]:void 0}var fn=un,dn=Re,pn=Object.prototype,gn=pn.hasOwnProperty;function _n(e){var t=this.__data__;return dn?t[e]!==void 0:gn.call(t,e)}var mn=_n,yn=Re,vn="__lodash_hash_undefined__";function bn(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=yn&&t===void 0?vn:t,this}var En=bn,Cn=nn,xn=an,wn=fn,kn=mn,In=En;function xe(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}xe.prototype.clear=Cn,xe.prototype.delete=xn,xe.prototype.get=wn,xe.prototype.has=kn,xe.prototype.set=In;var On=xe;function Mn(){this.__data__=[],this.size=0}var $n=Mn;function Sn(e,t){return e===t||e!==e&&t!==t}var Tn=Sn,An=Tn;function Ln(e,t){for(var r=e.length;r--;)if(An(e[r][0],t))return r;return-1}var je=Ln,Rn=je,jn=Array.prototype,Nn=jn.splice;function Dn(e){var t=this.__data__,r=Rn(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():Nn.call(t,r,1),--this.size,!0}var Pn=Dn,Fn=je;function zn(e){var t=this.__data__,r=Fn(t,e);return r<0?void 0:t[r][1]}var Kn=zn,Hn=je;function Bn(e){return Hn(this.__data__,e)>-1}var Un=Bn,Wn=je;function Gn(e,t){var r=this.__data__,n=Wn(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var qn=Gn,Qn=$n,Jn=Pn,Vn=Kn,Yn=Un,Xn=qn;function we(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}we.prototype.clear=Qn,we.prototype.delete=Jn,we.prototype.get=Vn,we.prototype.has=Yn,we.prototype.set=Xn;var Zn=we,ei=ct,ti=Te,ri=ei(ti,"Map"),ni=ri,lt=On,ii=Zn,si=ni;function ai(){this.size=0,this.__data__={hash:new lt,map:new(si||ii),string:new lt}}var oi=ai;function ci(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var hi=ci,li=hi;function ui(e,t){var r=e.__data__;return li(t)?r[typeof t=="string"?"string":"hash"]:r.map}var Ne=ui,fi=Ne;function di(e){var t=fi(this,e).delete(e);return this.size-=t?1:0,t}var pi=di,gi=Ne;function _i(e){return gi(this,e).get(e)}var mi=_i,yi=Ne;function vi(e){return yi(this,e).has(e)}var bi=vi,Ei=Ne;function Ci(e,t){var r=Ei(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var xi=Ci,wi=oi,ki=pi,Ii=mi,Oi=bi,Mi=xi;function ke(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}ke.prototype.clear=wi,ke.prototype.delete=ki,ke.prototype.get=Ii,ke.prototype.has=Oi,ke.prototype.set=Mi;var $i=ke,ut=$i,Si="Expected a function";function Ue(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(Si);var r=function(){var n=arguments,a=t?t.apply(this,n):n[0],c=r.cache;if(c.has(a))return c.get(a);var h=e.apply(this,n);return r.cache=c.set(a,h)||c,h};return r.cache=new(Ue.Cache||ut),r}Ue.Cache=ut;var Ti=Ue,Ai=Ti,Li=500;function Ri(e){var t=Ai(e,function(n){return r.size===Li&&r.clear(),n}),r=t.cache;return t}var ji=Ri,Ni=ji,Di=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Pi=/\\(\\)?/g,Fi=Ni(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(Di,function(r,n,a,c){t.push(a?c.replace(Pi,"$1"):n||r)}),t}),zi=Fi;function Ki(e,t){for(var r=-1,n=e==null?0:e.length,a=Array(n);++r<n;)a[r]=t(e[r],r,e);return a}var Hi=Ki,ft=He,Bi=Hi,Ui=Ke,Wi=Ae,Gi=1/0,dt=ft?ft.prototype:void 0,pt=dt?dt.toString:void 0;function gt(e){if(typeof e=="string")return e;if(Ui(e))return Bi(e,gt)+"";if(Wi(e))return pt?pt.call(e):"";var t=e+"";return t=="0"&&1/e==-Gi?"-0":t}var qi=gt,Qi=qi;function Ji(e){return e==null?"":Qi(e)}var Vi=Ji,Yi=Ke,Xi=mr,Zi=zi,es=Vi;function ts(e,t){return Yi(e)?e:Xi(e,t)?[e]:Zi(es(e))}var rs=ts,ns=Ae,is=1/0;function ss(e){if(typeof e=="string"||ns(e))return e;var t=e+"";return t=="0"&&1/e==-is?"-0":t}var as=ss,os=rs,cs=as;function hs(e,t){t=os(t,e);for(var r=0,n=t.length;e!=null&&r<n;)e=e[cs(t[r++])];return r&&r==n?e:void 0}var ls=hs,us=ls;function fs(e,t,r){var n=e==null?void 0:us(e,t);return n===void 0?r:n}var We=fs;const _t=(e,t={},r={})=>{const{autoPickAllColumns:n}=t;for(const a of e){const{children:c}=a;c&&(r=_t(c,t,r));const{title:h,key:l,dataIndex:o,exporter:f}=a,d=(Array.isArray(o)?o.join("."):o)??(l==null?void 0:l.toString());if(!d)continue;const p=d,E=typeof h=="string"?h:p??"No Title";if(f){const x={header:E,formatter:typeof f=="function"?f:f.formatter};r[p]=x;continue}n&&(r[p]=E)}return r},ds=(e,t,r)=>{if(!e||e.length===0)return{data:[],fields:[]};const n=[...e],a=r.map(h=>{const l=We(t,h);return typeof l=="string"||typeof l=="number"?l:l.header||""}),c=n.map((h,l)=>r.map(o=>{var p;const f=We(t,o),d=We(h,o);return typeof f=="string"||typeof f=="number"?d:(p=f==null?void 0:f.formatter)==null?void 0:p.call(f,d,h,l)}));return[a,...c]},mt=e=>{const{dataSource:t=[],fileName:r,fields:n,disabled:a,btnProps:c,modalProps:h,columns:l=[],showColumnPicker:o=!1,papaparseConfig:f={},autoPickAllColumns:d=!0}=e,p=M.useMemo(()=>_t(l,{...e,autoPickAllColumns:d}),[d,l,e]),[E,x]=M.useState(!1),O=M.useMemo(()=>n??p,[p,n]),[L,A]=M.useState(()=>n?Object.keys(n):l?Object.keys(p):[]);M.useEffect(()=>{n?A(Object.keys(n)):l&&A(Object.keys(p))},[n,l,p]);const S=M.useCallback(()=>{if(!t)return;const N=Object.keys(O).filter(s=>L.indexOf(s)>-1);console.log("fieldsOrColumns:",O);const U=ds(t,O,N);console.log("data:",U);const J=ze.unparse(U,{skipEmptyLines:"greedy",header:!1,...f}),$=new Blob([J]),v=window.document.createElement("a");v.href=window.URL.createObjectURL($),v.download=`${r||"table"}.csv`,document.body.appendChild(v),v.click(),document.body.removeChild(v),x(!1)},[t,O,f,r,L]),q=M.useCallback((N,U)=>{let J=[...L];U?J=Array.from(new Set([...J,N])):J=J.filter($=>$!==N),A(J)},[L]);return M.createElement(M.Fragment,null,M.createElement(Me.Button,{onClick:()=>o?x(!0):S(),disabled:a,...c},e.children??"Export to CSV"),o?M.createElement(Me.Modal,{visible:E,onOk:()=>S(),onCancel:()=>x(!1),width:400,okButtonProps:{disabled:L.length<1,title:L.length<1?"Please select at least one column.":void 0},okText:"Export",title:"Select columns to export",...h},M.createElement("div",{className:"d-flex flex-column align-start"},Object.entries(O).map(([N,U])=>M.createElement(Me.Checkbox,{key:N,style:{padding:0,margin:0},defaultChecked:!0,checked:L.indexOf(N)>-1,onChange:J=>q(N,J.target.checked)},typeof U=="string"||typeof U=="number"?U:(U==null?void 0:U.header)??"")))):null)};var ps=Te,gs=function(){return ps.Date.now()},_s=gs,ms=/\s/;function ys(e){for(var t=e.length;t--&&ms.test(e.charAt(t)););return t}var vs=ys,bs=vs,Es=/^\s+/;function Cs(e){return e&&e.slice(0,bs(e)+1).replace(Es,"")}var xs=Cs,ws=xs,yt=Le,ks=Ae,vt=0/0,Is=/^[-+]0x[0-9a-f]+$/i,Os=/^0b[01]+$/i,Ms=/^0o[0-7]+$/i,$s=parseInt;function Ss(e){if(typeof e=="number")return e;if(ks(e))return vt;if(yt(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=yt(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=ws(e);var r=Os.test(e);return r||Ms.test(e)?$s(e.slice(2),r?2:8):Is.test(e)?vt:+e}var Ts=Ss,As=Le,Ge=_s,bt=Ts,Ls="Expected a function",Rs=Math.max,js=Math.min;function Ns(e,t,r){var n,a,c,h,l,o,f=0,d=!1,p=!1,E=!0;if(typeof e!="function")throw new TypeError(Ls);t=bt(t)||0,As(r)&&(d=!!r.leading,p="maxWait"in r,c=p?Rs(bt(r.maxWait)||0,t):c,E="trailing"in r?!!r.trailing:E);function x($){var v=n,s=a;return n=a=void 0,f=$,h=e.apply(s,v),h}function O($){return f=$,l=setTimeout(S,t),d?x($):h}function L($){var v=$-o,s=$-f,i=t-v;return p?js(i,c-s):i}function A($){var v=$-o,s=$-f;return o===void 0||v>=t||v<0||p&&s>=c}function S(){var $=Ge();if(A($))return q($);l=setTimeout(S,L($))}function q($){return l=void 0,E&&n?x($):(n=a=void 0,h)}function N(){l!==void 0&&clearTimeout(l),f=0,n=o=a=l=void 0}function U(){return l===void 0?h:q(Ge())}function J(){var $=Ge(),v=A($);if(n=arguments,a=this,o=$,v){if(l===void 0)return O(o);if(p)return clearTimeout(l),l=setTimeout(S,t),x(o)}return l===void 0&&(l=setTimeout(S,t)),h}return J.cancel=N,J.flush=U,J}var Ds=Ns;function de(e){return Array.isArray?Array.isArray(e):xt(e)==="[object Array]"}const Ps=1/0;function Fs(e){if(typeof e=="string")return e;let t=e+"";return t=="0"&&1/e==-Ps?"-0":t}function zs(e){return e==null?"":Fs(e)}function ue(e){return typeof e=="string"}function Et(e){return typeof e=="number"}function Ks(e){return e===!0||e===!1||Hs(e)&&xt(e)=="[object Boolean]"}function Ct(e){return typeof e=="object"}function Hs(e){return Ct(e)&&e!==null}function ne(e){return e!=null}function qe(e){return!e.trim().length}function xt(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const Ca="Extended search is not available",Bs="Incorrect 'index' type",Us=e=>`Invalid value for key ${e}`,Ws=e=>`Pattern length exceeds max of ${e}.`,Gs=e=>`Missing ${e} property in key`,qs=e=>`Property 'weight' in key '${e}' must be a positive integer`,wt=Object.prototype.hasOwnProperty;class Qs{constructor(t){this._keys=[],this._keyMap={};let r=0;t.forEach(n=>{let a=kt(n);r+=a.weight,this._keys.push(a),this._keyMap[a.id]=a,r+=a.weight}),this._keys.forEach(n=>{n.weight/=r})}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function kt(e){let t=null,r=null,n=null,a=1,c=null;if(ue(e)||de(e))n=e,t=It(e),r=Qe(e);else{if(!wt.call(e,"name"))throw new Error(Gs("name"));const h=e.name;if(n=h,wt.call(e,"weight")&&(a=e.weight,a<=0))throw new Error(qs(h));t=It(h),r=Qe(h),c=e.getFn}return{path:t,id:r,weight:a,src:n,getFn:c}}function It(e){return de(e)?e:e.split(".")}function Qe(e){return de(e)?e.join("."):e}function Js(e,t){let r=[],n=!1;const a=(c,h,l)=>{if(ne(c))if(!h[l])r.push(c);else{let o=h[l];const f=c[o];if(!ne(f))return;if(l===h.length-1&&(ue(f)||Et(f)||Ks(f)))r.push(zs(f));else if(de(f)){n=!0;for(let d=0,p=f.length;d<p;d+=1)a(f[d],h,l+1)}else h.length&&a(f,h,l+1)}};return a(e,ue(t)?t.split("."):t,0),n?r:r[0]}var k={...{isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1},...{includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},...{location:0,threshold:.6,distance:100},...{useExtendedSearch:!1,getFn:Js,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1}};const Vs=/[^ ]+/g;function Ys(e=1,t=3){const r=new Map,n=Math.pow(10,t);return{get(a){const c=a.match(Vs).length;if(r.has(c))return r.get(c);const h=1/Math.pow(c,.5*e),l=parseFloat(Math.round(h*n)/n);return r.set(c,l),l},clear(){r.clear()}}}class Je{constructor({getFn:t=k.getFn,fieldNormWeight:r=k.fieldNormWeight}={}){this.norm=Ys(r,3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach((r,n)=>{this._keysMap[r.id]=n})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,ue(this.docs[0])?this.docs.forEach((t,r)=>{this._addString(t,r)}):this.docs.forEach((t,r)=>{this._addObject(t,r)}),this.norm.clear())}add(t){const r=this.size();ue(t)?this._addString(t,r):this._addObject(t,r)}removeAt(t){this.records.splice(t,1);for(let r=t,n=this.size();r<n;r+=1)this.records[r].i-=1}getValueForItemAtKeyId(t,r){return t[this._keysMap[r]]}size(){return this.records.length}_addString(t,r){if(!ne(t)||qe(t))return;let n={v:t,i:r,n:this.norm.get(t)};this.records.push(n)}_addObject(t,r){let n={i:r,$:{}};this.keys.forEach((a,c)=>{let h=a.getFn?a.getFn(t):this.getFn(t,a.path);if(ne(h)){if(de(h)){let l=[];const o=[{nestedArrIndex:-1,value:h}];for(;o.length;){const{nestedArrIndex:f,value:d}=o.pop();if(ne(d))if(ue(d)&&!qe(d)){let p={v:d,i:f,n:this.norm.get(d)};l.push(p)}else de(d)&&d.forEach((p,E)=>{o.push({nestedArrIndex:E,value:p})})}n.$[c]=l}else if(ue(h)&&!qe(h)){let l={v:h,n:this.norm.get(h)};n.$[c]=l}}}),this.records.push(n)}toJSON(){return{keys:this.keys,records:this.records}}}function Ot(e,t,{getFn:r=k.getFn,fieldNormWeight:n=k.fieldNormWeight}={}){const a=new Je({getFn:r,fieldNormWeight:n});return a.setKeys(e.map(kt)),a.setSources(t),a.create(),a}function Xs(e,{getFn:t=k.getFn,fieldNormWeight:r=k.fieldNormWeight}={}){const{keys:n,records:a}=e,c=new Je({getFn:t,fieldNormWeight:r});return c.setKeys(n),c.setIndexRecords(a),c}function De(e,{errors:t=0,currentLocation:r=0,expectedLocation:n=0,distance:a=k.distance,ignoreLocation:c=k.ignoreLocation}={}){const h=t/e.length;if(c)return h;const l=Math.abs(n-r);return a?h+l/a:l?1:h}function Zs(e=[],t=k.minMatchCharLength){let r=[],n=-1,a=-1,c=0;for(let h=e.length;c<h;c+=1){let l=e[c];l&&n===-1?n=c:!l&&n!==-1&&(a=c-1,a-n+1>=t&&r.push([n,a]),n=-1)}return e[c-1]&&c-n>=t&&r.push([n,c-1]),r}const be=32;function ea(e,t,r,{location:n=k.location,distance:a=k.distance,threshold:c=k.threshold,findAllMatches:h=k.findAllMatches,minMatchCharLength:l=k.minMatchCharLength,includeMatches:o=k.includeMatches,ignoreLocation:f=k.ignoreLocation}={}){if(t.length>be)throw new Error(Ws(be));const d=t.length,p=e.length,E=Math.max(0,Math.min(n,p));let x=c,O=E;const L=l>1||o,A=L?Array(p):[];let S;for(;(S=e.indexOf(t,O))>-1;){let v=De(t,{currentLocation:S,expectedLocation:E,distance:a,ignoreLocation:f});if(x=Math.min(v,x),O=S+d,L){let s=0;for(;s<d;)A[S+s]=1,s+=1}}O=-1;let q=[],N=1,U=d+p;const J=1<<d-1;for(let v=0;v<d;v+=1){let s=0,i=U;for(;s<i;)De(t,{errors:v,currentLocation:E+i,expectedLocation:E,distance:a,ignoreLocation:f})<=x?s=i:U=i,i=Math.floor((U-s)/2+s);U=i;let u=Math.max(1,E-i+1),g=h?p:Math.min(E+i,p)+d,_=Array(g+2);_[g+1]=(1<<v)-1;for(let w=g;w>=u;w-=1){let H=w-1,D=r[e.charAt(H)];if(L&&(A[H]=+!!D),_[w]=(_[w+1]<<1|1)&D,v&&(_[w]|=(q[w+1]|q[w])<<1|1|q[w+1]),_[w]&J&&(N=De(t,{errors:v,currentLocation:H,expectedLocation:E,distance:a,ignoreLocation:f}),N<=x)){if(x=N,O=H,O<=E)break;u=Math.max(1,2*E-O)}}if(De(t,{errors:v+1,currentLocation:E,expectedLocation:E,distance:a,ignoreLocation:f})>x)break;q=_}const $={isMatch:O>=0,score:Math.max(.001,N)};if(L){const v=Zs(A,l);v.length?o&&($.indices=v):$.isMatch=!1}return $}function ta(e){let t={};for(let r=0,n=e.length;r<n;r+=1){const a=e.charAt(r);t[a]=(t[a]||0)|1<<n-r-1}return t}class Mt{constructor(t,{location:r=k.location,threshold:n=k.threshold,distance:a=k.distance,includeMatches:c=k.includeMatches,findAllMatches:h=k.findAllMatches,minMatchCharLength:l=k.minMatchCharLength,isCaseSensitive:o=k.isCaseSensitive,ignoreLocation:f=k.ignoreLocation}={}){if(this.options={location:r,threshold:n,distance:a,includeMatches:c,findAllMatches:h,minMatchCharLength:l,isCaseSensitive:o,ignoreLocation:f},this.pattern=o?t:t.toLowerCase(),this.chunks=[],!this.pattern.length)return;const d=(E,x)=>{this.chunks.push({pattern:E,alphabet:ta(E),startIndex:x})},p=this.pattern.length;if(p>be){let E=0;const x=p%be,O=p-x;for(;E<O;)d(this.pattern.substr(E,be),E),E+=be;if(x){const L=p-be;d(this.pattern.substr(L),L)}}else d(this.pattern,0)}searchIn(t){const{isCaseSensitive:r,includeMatches:n}=this.options;if(r||(t=t.toLowerCase()),this.pattern===t){let O={isMatch:!0,score:0};return n&&(O.indices=[[0,t.length-1]]),O}const{location:a,distance:c,threshold:h,findAllMatches:l,minMatchCharLength:o,ignoreLocation:f}=this.options;let d=[],p=0,E=!1;this.chunks.forEach(({pattern:O,alphabet:L,startIndex:A})=>{const{isMatch:S,score:q,indices:N}=ea(t,O,L,{location:a+A,distance:c,threshold:h,findAllMatches:l,minMatchCharLength:o,includeMatches:n,ignoreLocation:f});S&&(E=!0),p+=q,S&&N&&(d=[...d,...N])});let x={isMatch:E,score:E?p/this.chunks.length:1};return E&&n&&(x.indices=d),x}}class _e{constructor(t){this.pattern=t}static isMultiMatch(t){return $t(t,this.multiRegex)}static isSingleMatch(t){return $t(t,this.singleRegex)}search(){}}function $t(e,t){const r=e.match(t);return r?r[1]:null}class ra extends _e{constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){const r=t===this.pattern;return{isMatch:r,score:r?0:1,indices:[0,this.pattern.length-1]}}}class na extends _e{constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){const n=t.indexOf(this.pattern)===-1;return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class ia extends _e{constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){const r=t.startsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,this.pattern.length-1]}}}class sa extends _e{constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){const r=!t.startsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,t.length-1]}}}class aa extends _e{constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){const r=t.endsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[t.length-this.pattern.length,t.length-1]}}}class oa extends _e{constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){const r=!t.endsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,t.length-1]}}}class St extends _e{constructor(t,{location:r=k.location,threshold:n=k.threshold,distance:a=k.distance,includeMatches:c=k.includeMatches,findAllMatches:h=k.findAllMatches,minMatchCharLength:l=k.minMatchCharLength,isCaseSensitive:o=k.isCaseSensitive,ignoreLocation:f=k.ignoreLocation}={}){super(t),this._bitapSearch=new Mt(t,{location:r,threshold:n,distance:a,includeMatches:c,findAllMatches:h,minMatchCharLength:l,isCaseSensitive:o,ignoreLocation:f})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}}class Tt extends _e{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let r=0,n;const a=[],c=this.pattern.length;for(;(n=t.indexOf(this.pattern,r))>-1;)r=n+c,a.push([n,r-1]);const h=!!a.length;return{isMatch:h,score:h?0:1,indices:a}}}const Ve=[ra,Tt,ia,sa,oa,aa,na,St],At=Ve.length,ca=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,ha="|";function la(e,t={}){return e.split(ha).map(r=>{let n=r.trim().split(ca).filter(c=>c&&!!c.trim()),a=[];for(let c=0,h=n.length;c<h;c+=1){const l=n[c];let o=!1,f=-1;for(;!o&&++f<At;){const d=Ve[f];let p=d.isMultiMatch(l);p&&(a.push(new d(p,t)),o=!0)}if(!o)for(f=-1;++f<At;){const d=Ve[f];let p=d.isSingleMatch(l);if(p){a.push(new d(p,t));break}}}return a})}const ua=new Set([St.type,Tt.type]);class fa{constructor(t,{isCaseSensitive:r=k.isCaseSensitive,includeMatches:n=k.includeMatches,minMatchCharLength:a=k.minMatchCharLength,ignoreLocation:c=k.ignoreLocation,findAllMatches:h=k.findAllMatches,location:l=k.location,threshold:o=k.threshold,distance:f=k.distance}={}){this.query=null,this.options={isCaseSensitive:r,includeMatches:n,minMatchCharLength:a,findAllMatches:h,ignoreLocation:c,location:l,threshold:o,distance:f},this.pattern=r?t:t.toLowerCase(),this.query=la(this.pattern,this.options)}static condition(t,r){return r.useExtendedSearch}searchIn(t){const r=this.query;if(!r)return{isMatch:!1,score:1};const{includeMatches:n,isCaseSensitive:a}=this.options;t=a?t:t.toLowerCase();let c=0,h=[],l=0;for(let o=0,f=r.length;o<f;o+=1){const d=r[o];h.length=0,c=0;for(let p=0,E=d.length;p<E;p+=1){const x=d[p],{isMatch:O,indices:L,score:A}=x.search(t);if(O){if(c+=1,l+=A,n){const S=x.constructor.type;ua.has(S)?h=[...h,...L]:h.push(L)}}else{l=0,c=0,h.length=0;break}}if(c){let p={isMatch:!0,score:l/c};return n&&(p.indices=h),p}}return{isMatch:!1,score:1}}}const Ye=[];function da(...e){Ye.push(...e)}function Xe(e,t){for(let r=0,n=Ye.length;r<n;r+=1){let a=Ye[r];if(a.condition(e,t))return new a(e,t)}return new Mt(e,t)}const Pe={AND:"$and",OR:"$or"},Ze={PATH:"$path",PATTERN:"$val"},et=e=>!!(e[Pe.AND]||e[Pe.OR]),pa=e=>!!e[Ze.PATH],ga=e=>!de(e)&&Ct(e)&&!et(e),Lt=e=>({[Pe.AND]:Object.keys(e).map(t=>({[t]:e[t]}))});function Rt(e,t,{auto:r=!0}={}){const n=a=>{let c=Object.keys(a);const h=pa(a);if(!h&&c.length>1&&!et(a))return n(Lt(a));if(ga(a)){const o=h?a[Ze.PATH]:c[0],f=h?a[Ze.PATTERN]:a[o];if(!ue(f))throw new Error(Us(o));const d={keyId:Qe(o),pattern:f};return r&&(d.searcher=Xe(f,t)),d}let l={children:[],operator:c[0]};return c.forEach(o=>{const f=a[o];de(f)&&f.forEach(d=>{l.children.push(n(d))})}),l};return et(e)||(e=Lt(e)),n(e)}function _a(e,{ignoreFieldNorm:t=k.ignoreFieldNorm}){e.forEach(r=>{let n=1;r.matches.forEach(({key:a,norm:c,score:h})=>{const l=a?a.weight:null;n*=Math.pow(h===0&&l?Number.EPSILON:h,(l||1)*(t?1:c))}),r.score=n})}function ma(e,t){const r=e.matches;t.matches=[],ne(r)&&r.forEach(n=>{if(!ne(n.indices)||!n.indices.length)return;const{indices:a,value:c}=n;let h={indices:a,value:c};n.key&&(h.key=n.key.src),n.idx>-1&&(h.refIndex=n.idx),t.matches.push(h)})}function ya(e,t){t.score=e.score}function va(e,t,{includeMatches:r=k.includeMatches,includeScore:n=k.includeScore}={}){const a=[];return r&&a.push(ma),n&&a.push(ya),e.map(c=>{const{idx:h}=c,l={item:t[h],refIndex:h};return a.length&&a.forEach(o=>{o(c,l)}),l})}class Ie{constructor(t,r={},n){this.options={...k,...r},this.options.useExtendedSearch,this._keyStore=new Qs(this.options.keys),this.setCollection(t,n)}setCollection(t,r){if(this._docs=t,r&&!(r instanceof Je))throw new Error(Bs);this._myIndex=r||Ot(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(t){ne(t)&&(this._docs.push(t),this._myIndex.add(t))}remove(t=()=>!1){const r=[];for(let n=0,a=this._docs.length;n<a;n+=1){const c=this._docs[n];t(c,n)&&(this.removeAt(n),n-=1,a-=1,r.push(c))}return r}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:r=-1}={}){const{includeMatches:n,includeScore:a,shouldSort:c,sortFn:h,ignoreFieldNorm:l}=this.options;let o=ue(t)?ue(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return _a(o,{ignoreFieldNorm:l}),c&&o.sort(h),Et(r)&&r>-1&&(o=o.slice(0,r)),va(o,this._docs,{includeMatches:n,includeScore:a})}_searchStringList(t){const r=Xe(t,this.options),{records:n}=this._myIndex,a=[];return n.forEach(({v:c,i:h,n:l})=>{if(!ne(c))return;const{isMatch:o,score:f,indices:d}=r.searchIn(c);o&&a.push({item:c,idx:h,matches:[{score:f,value:c,norm:l,indices:d}]})}),a}_searchLogical(t){const r=Rt(t,this.options),n=(l,o,f)=>{if(!l.children){const{keyId:p,searcher:E}=l,x=this._findMatches({key:this._keyStore.get(p),value:this._myIndex.getValueForItemAtKeyId(o,p),searcher:E});return x&&x.length?[{idx:f,item:o,matches:x}]:[]}const d=[];for(let p=0,E=l.children.length;p<E;p+=1){const x=l.children[p],O=n(x,o,f);if(O.length)d.push(...O);else if(l.operator===Pe.AND)return[]}return d},a=this._myIndex.records,c={},h=[];return a.forEach(({$:l,i:o})=>{if(ne(l)){let f=n(r,l,o);f.length&&(c[o]||(c[o]={idx:o,item:l,matches:[]},h.push(c[o])),f.forEach(({matches:d})=>{c[o].matches.push(...d)}))}}),h}_searchObjectList(t){const r=Xe(t,this.options),{keys:n,records:a}=this._myIndex,c=[];return a.forEach(({$:h,i:l})=>{if(!ne(h))return;let o=[];n.forEach((f,d)=>{o.push(...this._findMatches({key:f,value:h[d],searcher:r}))}),o.length&&c.push({idx:l,item:h,matches:o})}),c}_findMatches({key:t,value:r,searcher:n}){if(!ne(r))return[];let a=[];if(de(r))r.forEach(({v:c,i:h,n:l})=>{if(!ne(c))return;const{isMatch:o,score:f,indices:d}=n.searchIn(c);o&&a.push({score:f,key:t,value:c,idx:h,norm:l,indices:d})});else{const{v:c,n:h}=r,{isMatch:l,score:o,indices:f}=n.searchIn(c);l&&a.push({score:o,key:t,value:c,norm:h,indices:f})}return a}}Ie.version="6.6.2",Ie.createIndex=Ot,Ie.parseIndex=Xs,Ie.config=k,Ie.parseQuery=Rt,da(fa);const jt=(e,t=[])=>{for(const r of e.children){const n=r;if(n.children&&Array.isArray(n.children))t=jt(n,t);else{const a=r;if(!a.dataIndex)continue;if(Array.isArray(a.dataIndex)){t=[...t,a.dataIndex.join(".")];continue}t=[...t,a.dataIndex]}}return t},ba=(e,t)=>{const r=e==null?void 0:e[0];return(t??[]).map(a=>{const{children:c}=a;if(c&&Array.isArray(c))return(jt(a,[])??[]).flat();const{dataIndex:h}=a;if(Array.isArray(h))return h.join(".");if(r&&Object.prototype.toString.call(r[h])==="[object Object]"&&["string","number"].includes(typeof h))throw new Error(`'${h}' is an object in dataSource. But dataIndex is given as string. If it is an object, use array of strings as dataIndex.`);return h}).filter(a=>!!a).flat(10).filter(a=>["string","number"].includes(typeof a))};function Nt({searchFunction:e=void 0,dataSource:t=[],setDataSource:r,debounce:n=!0,inputProps:a={placeholder:"Search..."},fuzzySearch:c=!1,columns:h=[],fuseProps:l}){const[o,f]=M.useState(""),d=M.useRef([]),p=M.useRef(),E=M.useMemo(()=>({keys:ba(t,h),threshold:c?.6:.1,shouldSort:!1,...l}),[l,t,h,c]),x=M.useCallback((A,S="")=>S===""||!p||!p.current?d.current??[]:p.current.search(S).map(N=>N.item),[]),O=M.useCallback(Ds((A,S,q)=>{const N=q==null?void 0:q(A,S);r==null||r(N)},100,{leading:!1,trailing:!0}),[]),L=M.useCallback(A=>{const S=A.target.value;if(f(S),n)O(t,S,e??x);else{const q=(e==null?void 0:e(t,S))??x(t,S);r==null||r(q)}},[t,n,e,x,O,r]);return M.useEffect(()=>{t&&(d.current=[...t],p.current=new Ie(t,E))},[t,E]),M.useEffect(()=>{if(!(!t||!o))if(n)O(t,o,e??x);else{const A=(e==null?void 0:e(t,o))??x(t,o);r==null||r(A)}},[o,t,O,e,r,n,x]),M.createElement(Me.Input,{value:o,onChange:L,placeholder:"Search...",allowClear:!0,...a})}function Ea({exportable:e=!1,exportableProps:t,searchable:r=!1,searchableProps:n,dataSource:a,columns:c,...h}){var p;const l=M.useMemo(()=>e||!!t,[e,t]),o=M.useMemo(()=>r||n,[r,n]),[f,d]=M.useState(a);return M.useEffect(()=>{o&&d(a)},[a,o]),M.createElement("div",{className:"ant-table-extensions"},M.createElement("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:10}},l?M.createElement(mt,{dataSource:a,columns:c,...t}):null,o?M.createElement(Nt,{columns:c,dataSource:a,setDataSource:d,...n,inputProps:{style:{width:l?"60%":"100%",...(p=n==null?void 0:n.inputProps)==null?void 0:p.style},...n==null?void 0:n.inputProps}}):null),M.createElement(Me.Table,{dataSource:o?f:a,columns:c,...h}))}le.ExportTableButton=mt,le.SearchTableInput=Nt,le.Table=Ea,Object.defineProperty(le,Symbol.toStringTag,{value:"Module"})});
